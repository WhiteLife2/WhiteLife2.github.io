<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="study life"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>kotlin基础语法（一） - alonealice</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/earthWo"><span>Github</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="https://img.zcool.cn/community/014177554b6ae7000001bf729a3698.jpg@1280w_1l_0o_100sh.jpg"><div class="post-title"><h1 class="title">kotlin基础语法（一）</h1><ul class="meta"><li><i class="icon icon-author"></i>alonealice</li><li><i class="icon icon-clock"></i>10 Minutes</li><li><i class="icon icon-calendar"></i>2017年5月31日</li></ul></div></div><div class="article-content" style="max-width:800px"><p>自从今年google在开发者大会上宣布，将Kotlin作为Android开发的主要语言后，越来越多的开发者开始关注Kotlin，那么我们就来学习一下Kotlin的基础语法。</p>
<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><h4 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h4><p>kotlin提供了6种内建数值类型，具体的类型和位宽如下（括号里为位宽）：Int(32)，Float(32)，Double(64)，Long(64)，Short(16)，Byte(8)。这里需要注意的是没有字符类型，而且与java不同的是每个类型的首字母都是大写的。</p>
<h5 id="数值常量"><a href="#数值常量" class="headerlink" title="数值常量"></a>数值常量</h5><p>数值的常量与java一样，比如Long类型在末尾加L，Float类型在末尾加F或f。在定义数值常量时与java有所不同，Kotlin使用了一个关键字<code>val</code>:<code>val a = 1000 val a: Int = 10000</code>。上面的两句赋值语句实际上是一样的，只是第一句需要程序自动去推断出Int类型，而第二句则直接将类型指定为Int类型。这里有个地方需要注意，第二句中的冒号的位置，在冒号区分类型和父类型中要有空格，在实例和类型之间是没有空格的。</p>
<h5 id="数值常量中添加下划线分割-1-1版本新特性"><a href="#数值常量中添加下划线分割-1-1版本新特性" class="headerlink" title="数值常量中添加下划线分割(1.1版本新特性)"></a>数值常量中添加下划线分割(1.1版本新特性)</h5><p>在1.1新版中，可以在常量中添加下划线，以增加可阅读性。如：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val oneMillion = 1_000_000</span><br><span class="line">val socialSecurityNumber = 999_99_9999L</span><br></pre></td></tr></table></figure></p>
<h5 id="使用可空的值并检测-null"><a href="#使用可空的值并检测-null" class="headerlink" title="使用可空的值并检测 null"></a>使用可空的值并检测 null</h5><p>当数值可空时必须明确地加以标记，如：<code>val a: Int?null = null</code>。而当数值做可空标识时，指数值将会被装箱，比如说上面的语句就相当于a被装箱为java的Integer,所以就有了如下的情况：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val a: Int = 10000</span><br><span class="line">print (a === a ) // 打印 &apos;true&apos;</span><br><span class="line">val boxedA: Int? =a</span><br><span class="line">val anotherBoxedA: Int? = a</span><br><span class="line">print(boxedA === anotherBoxedA ) // 对象比较，打印false</span><br><span class="line">print(boxedA == anotherBoxedA ) // 对象的值比较，打印true</span><br></pre></td></tr></table></figure></p>
<h5 id="数值之间的转换"><a href="#数值之间的转换" class="headerlink" title="数值之间的转换"></a>数值之间的转换</h5><p>数值转换和java一样，有显示转换和隐式转换。<br>隐式转换就是我们使用了上下文推断出类型，并且算术运算会为合适的转换进行重载。<br>每个数值类型都支持如下的显示转换：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">toByte(): Byte</span><br><span class="line">toShort(): Short</span><br><span class="line">toInt(): Int</span><br><span class="line">toLong(): Long</span><br><span class="line">toFloat(): Float</span><br><span class="line">toDouble(): Double</span><br><span class="line">toChar(): Char</span><br></pre></td></tr></table></figure></p>
<p>在这里也有一点需要注意，当我们在定义数值时如果用了可空标识，那么在转换的时候就需要做判空操作。</p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>布尔值与数值基本一样，如：<code>var v:Boolean=false</code></p>
<h4 id="字符和字符串"><a href="#字符和字符串" class="headerlink" title="字符和字符串"></a>字符和字符串</h4><p>字符类型用Char表示，但是它不能当数值来使用，但是可以通过显示转换转换为数值类型。字符串用String表示，它与字符在声明略有不同，如<code>var a=&#39;e&#39; var b=&quot;e&quot;</code>，前者是字符，后者是字符串，字符用的是单引号，字符串是双引号。字符串可以直接通过索引读取，比如：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val a=&quot;hello&quot;</span><br><span class="line">print(&quot;\$a=$&#123;a[3]&#125;&quot;)//打印l</span><br></pre></td></tr></table></figure></p>
<p>也可以通过for循环读取，比如：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for (c in a) &#123;//将依次打印a字符串</span><br><span class="line">    println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>字符串可以包含模板表达式，即可求值的代码片段，并将其结果连接到字符串中。一个模板表达式由一个 $ 开始并包含另一个简单的名称：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val a=&quot;s&quot;</span><br><span class="line">print(&quot;\$a=$a&quot;)</span><br></pre></td></tr></table></figure></p>
<p>获取是带一个大括号的表达式<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print(&quot;\$a=$&#123;a[0]&#125;&quot;)</span><br></pre></td></tr></table></figure></p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>在Kotlin中，数组用Array表示。它有get和set方法读取和存储，也可以直接使用[]调用。创建数组的方法有很多。<br>首先，我们可以用arrayof()来创建Array： <code>var v= arrayOf(1,2,3)</code><br>我们也可以通过arrayOfNulls来创建指定大小的空Array： <code>var v= arrayOfNulls&lt;Int&gt;(12)</code><br>或者通过工厂函数通过索引来创建：<code>var v=Array(5,{i-&gt;{i}})  //创建的Array 为[1,2,3,4,5]</code><br>Kotlin 有专门的类来表示原始类型从而避免过度装箱： ByteArray, ShortArray, IntArray 等等。这些类与 Array 没有继承关系，但它们有一样的方法与属性。每个都有对应的库函数：<code>val x: IntArray = intArrayOf(1, 2, 3)</code></p>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p>Kotlin支持标准的算术运算表达，同时还提供了可以叫中缀形式的方法（只能用于Int和Long）。如下<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shl(bits) – 有符号左移 (相当于 Java中的 &lt;&lt;) shr(bits) – 有符号右移 (相当于 Java中的 &gt;&gt;) ushr(bits) – 无符号右移 (相当于 Java中的 &gt;&gt;&gt;) and(bits) – 按位与 or(bits) – 按位或 xor(bits) – 按位异或 inv(bits) – 按位翻转</span><br></pre></td></tr></table></figure></p>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><h4 id="if表达式"><a href="#if表达式" class="headerlink" title="if表达式"></a>if表达式</h4><p>在Kotlin中，if语句和java基本一致，但是没有三元运算符(condition ? then : else)。但是if可以直接返回值，所以三元运算符可以直接通过if else表示。<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val max = if (a &gt; b) a else b</span><br></pre></td></tr></table></figure></p>
<h4 id="when表达式"><a href="#when表达式" class="headerlink" title="when表达式"></a>when表达式</h4><p>when语句相当于java中的switch，它的基本用法如下：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">when (x) &#123;</span><br><span class="line">    1 -&gt; print(&quot;x == 1&quot;)</span><br><span class="line">    2 -&gt; print(&quot;x == 2&quot;)</span><br><span class="line">    else -&gt; &#123;</span><br><span class="line">        print(&quot;x is neither 1 nor 2&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>原来java中的<code>：</code>变成了<code>-&gt;</code>，<code>default</code>变成了else，同时也不用再用break了。<br>而当多个条件同时执行一条语句时：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">when (x) &#123;</span><br><span class="line">    1,2 -&gt; print(&quot;x == 1 or 2&quot;)</span><br><span class="line">    else -&gt; &#123;</span><br><span class="line">        print(&quot;x is neither 1 nor 2&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>同时，条件还可以用表达式来代替：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">when (x) &#123;</span><br><span class="line">    parseInt(s) -&gt; print(&quot;s encode x&quot;)</span><br><span class="line">    else -&gt; print(&quot;s does not encode x&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>还可以使用in和!in来判断是否在范围中：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">when (x) &#123;</span><br><span class="line">    in 1..10 -&gt; print(&quot;在1-10中间&quot;)</span><br><span class="line">    else -&gt; print(&quot;不在1-10中间&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以使用is来判断是否是摸个类型，同时可以直接返回值<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val hasPrefix = when (x) &#123;</span><br><span class="line">    is String -&gt; x.startsWith(&quot;prefix&quot;)</span><br><span class="line">    else -&gt; false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当when没有相应的参数提供时，分支条件就是简单的布尔表达式，当条件满足时就执行相应的分支：<br>when {<br>    x==4 -&gt; print(“x is 4”)<br>    x==5 -&gt; print(“x is 5”)<br>    else -&gt; print(“x不是4，5”)<br>}</p>
<h4 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h4><p>for 循环通过任何提供的迭代器进行迭代。<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for (item in collection)</span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure></p>
<p>也可以指定类型<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for (item:Int in collection)</span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure></p>
<p>while语句与java完全一样就不在介绍了。</p>
<h4 id="跳出循环"><a href="#跳出循环" class="headerlink" title="跳出循环"></a>跳出循环</h4><p>kotlin有3种跳出循环的方式：<code>return</code>、<code>break</code>、<code>continue</code>，这3个的用途基本与java相同，但是写法稍有不同。<br>在 Kotlin 中表达式可以通过 @ 结尾来表示标签，所有退出标签可以这样写：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">loop@ for (i in 1..100) &#123;</span><br><span class="line">    for (j in i..100) &#123;</span><br><span class="line">        if (...)</span><br><span class="line">            break@loop</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>同时也适用于return:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fun foo() &#123;</span><br><span class="line">    ints.forEach lit@ &#123;</span><br><span class="line">        if (it ==0) return＠lit</span><br><span class="line">        print(it)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样它只是从forEach方法中返回，它甚至可以这样写：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fun foo() &#123;</span><br><span class="line">    ints.forEach &#123;</span><br><span class="line">        if (it == 0) return@forEach</span><br><span class="line">        print(it)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://www.kotlincn.net/docs/reference/" target="_blank" rel="noopener">参考资料</a></p>
</div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a><span class="tag-list-count">1</span></li></ul></div><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin/">kotlin</a><span class="category-list-count">1</span></li></ul></div></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="ck85r7lsq002cfxo1d2axbviv" data-title="kotlin基础语法（一）" data-url="https://earthwo.github.io/2017/05/31/kotlin基础语法（一）/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/06/06/Kotlin基础语法（二）/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2017/05/17/Retrofit源码分析/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/earthWo" title="Github" target="_blank"><i class="icon icon-github"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2020 alonealice<br><small><a href="http://www.beian.miit.gov.cn" target="_blank">浙ICP备17033688号</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>