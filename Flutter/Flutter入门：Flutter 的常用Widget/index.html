<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="不懂要会问，打脸要立正">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Flutter入门：Flutter 的常用Widget - alonealice | Blog
        
    </title>

    <link rel="canonical" href="http://alonealice.com/Flutter/Flutter入门：Flutter 的常用Widget/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/article_header/article_bg.jpeg')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Flutter" title="Flutter">Flutter</a>
                            
                        </div>
                        <h1>Flutter入门：Flutter 的常用Widget</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by alonealice on
                            2021-01-03
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">alonealice</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="常用widgets">常用widgets</h2>
<h3 id="文本及样式">文本及样式</h3>
<h4 id="text">Text</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">"Hello world"</span>,</span><br><span class="line">  textAlign: TextAlign.left,</span><br><span class="line">  maxLines: <span class="number">1</span>,</span><br><span class="line">  overflow: TextOverflow.ellipsis,</span><br><span class="line">  textScaleFactor: <span class="number">1.5</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><code>textAlign</code>：文本的对齐方式；可以选择左对齐、右对齐还是居中】</p>
<p><code>maxLines</code>、<code>overflow</code>：指定文本显示的最大行数，默认情况下，文本是自动折行的，如果指定此参数，则文本最多不会超过指定的行。如果有多余的文本，可以通过<code>overflow</code>来指定截断方式，默认是直接截断</p>
<p><code>textScaleFactor</code>：代表文本相对于当前字体大小的缩放因子</p>
<h4 id="textstyle">TextStyle</h4>
<p><code>TextStyle</code>用于指定文本显示的样式如颜色、字体、粗细、背景等。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">"Hello world"</span>,</span><br><span class="line">  style: TextStyle(</span><br><span class="line">    color: Colors.blue,</span><br><span class="line">    fontSize: <span class="number">18.0</span>,</span><br><span class="line">    height: <span class="number">1.2</span>,  </span><br><span class="line">    fontFamily: <span class="string">"Courier"</span>,</span><br><span class="line">    background: <span class="keyword">new</span> Paint()..color=Colors.yellow,</span><br><span class="line">    decoration:TextDecoration.underline,</span><br><span class="line">    decorationStyle: TextDecorationStyle.dashed</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="textspan">TextSpan</h4>
<p>在上面的例子中，Text的所有文本内容只能按同一种样式，如果我们需要对一个Text内容的不同部分按照不同的样式显示，这时就可以使用<code>TextSpan</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextSpan(&#123;</span><br><span class="line">  TextStyle style, </span><br><span class="line">  Sting text,</span><br><span class="line">  <span class="built_in">List</span>&lt;TextSpan&gt; children,</span><br><span class="line">  GestureRecognizer recognizer,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Text.rich(TextSpan(</span><br><span class="line">    children: [</span><br><span class="line">     TextSpan(</span><br><span class="line">       text: <span class="string">"Home: "</span></span><br><span class="line">     ),</span><br><span class="line">     TextSpan(</span><br><span class="line">       text: <span class="string">"https://flutterchina.club"</span>,</span><br><span class="line">       style: TextStyle(</span><br><span class="line">         color: Colors.blue</span><br><span class="line">       ),  </span><br><span class="line">       recognizer: _tapRecognizer</span><br><span class="line">     ),</span><br><span class="line">    ]</span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<p><code>_tapRecognizer</code>，它是点击链接后的一个处理器</p>
<h4 id="defaulttextstyle">DefaultTextStyle</h4>
<p>在Widget树中，文本的样式默认是可以被继承的，如果在Widget树的某一个节点处设置一个默认的文本样式，那么该节点的子树中所有文本都会默认使用这个样式，而<code>DefaultTextStyle</code>正是用于设置默认文本样式的。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DefaultTextStyle(</span><br><span class="line">  <span class="comment">//1.设置文本默认样式  </span></span><br><span class="line">  style: TextStyle(</span><br><span class="line">    color:Colors.red,</span><br><span class="line">    fontSize: <span class="number">20.0</span>,</span><br><span class="line">  ),</span><br><span class="line">  textAlign: TextAlign.start,</span><br><span class="line">  child: Column(</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Text(<span class="string">"hello world"</span>),</span><br><span class="line">      Text(<span class="string">"I am Jack"</span>),</span><br><span class="line">      Text(<span class="string">"I am Jack"</span>,</span><br><span class="line">        style: TextStyle(</span><br><span class="line">          inherit: <span class="keyword">false</span>, <span class="comment">//2.不继承默认样式</span></span><br><span class="line">          color: Colors.grey</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>上面中第一和第二个文本样式都是默认的，第三个按自己的样式显示。</p>
<h4 id="字体">字体</h4>
<p>可以在Flutter应用程序中使用不同的字体。在Flutter中使用字体分两步完成。首先在<code>pubspec.yaml</code>中声明它们，以确保它们会打包到应用程序中。然后通过<a href="https://docs.flutter.io/flutter/painting/TextStyle-class.html" target="_blank" rel="noopener"><code>TextStyle</code></a>属性使用字体。</p>
<p><strong>在asset中声明</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flutter:</span></span><br><span class="line"><span class="attr">  fonts:</span></span><br><span class="line"><span class="attr">    - family:</span> <span class="string">Raleway</span></span><br><span class="line"><span class="attr">      fonts:</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">assets/fonts/Raleway-Regular.ttf</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">assets/fonts/Raleway-Medium.ttf</span></span><br><span class="line"><span class="attr">          weight:</span> <span class="number">500</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">assets/fonts/Raleway-SemiBold.ttf</span></span><br><span class="line"><span class="attr">          weight:</span> <span class="number">600</span></span><br><span class="line"><span class="attr">    - family:</span> <span class="string">AbrilFatface</span></span><br><span class="line"><span class="attr">      fonts:</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">assets/fonts/abrilfatface/AbrilFatface-Regular.ttf</span></span><br></pre></td></tr></table></figure>
<p><strong>使用字体</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明文本样式</span></span><br><span class="line"><span class="keyword">const</span> textStyle = <span class="keyword">const</span> TextStyle(</span><br><span class="line">  fontFamily: <span class="string">'Raleway'</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用文本样式</span></span><br><span class="line"><span class="keyword">var</span> buttonText = <span class="keyword">const</span> Text(</span><br><span class="line">  <span class="string">"Use the font for this text"</span>,</span><br><span class="line">  style: textStyle,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>Package中的字体</strong></p>
<p>要使用Package中定义的字体，<strong>必须提供<code>package</code>参数</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> textStyle = <span class="keyword">const</span> TextStyle(</span><br><span class="line">  fontFamily: <span class="string">'Raleway'</span>,</span><br><span class="line">  package: <span class="string">'my_package'</span>, <span class="comment">//指定包名</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>一个包也可以只提供字体文件而不需要在pubspec.yaml中声明。 这些文件应该存放在包的<code>lib/</code>文件夹中。字体文件不会自动绑定到应用程序中，应用程序可以在声明字体时有选择地使用这些字体。假设一个名为my_package的包中有一个字体文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib/fonts/Raleway-Medium.ttf</span><br></pre></td></tr></table></figure>
<p>然后，应用程序可以声明一个字体，如下面的示例所示：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flutter:</span></span><br><span class="line"><span class="attr">  fonts:</span></span><br><span class="line"><span class="attr">    - family:</span> <span class="string">Raleway</span></span><br><span class="line"><span class="attr">      fonts:</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">assets/fonts/Raleway-Regular.ttf</span></span><br><span class="line"><span class="attr">        - asset:</span> <span class="string">packages/my_package/fonts/Raleway-Medium.ttf</span></span><br><span class="line"><span class="attr">          weight:</span> <span class="number">500</span></span><br></pre></td></tr></table></figure>
<p><code>lib/</code>是隐含的，所以它不应该包含在asset路径中。</p>
<p>在这种情况下，由于应用程序本地定义了字体，所以在创建TextStyle时可以不指定<code>package</code>参数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> textStyle = <span class="keyword">const</span> TextStyle(</span><br><span class="line">  fontFamily: <span class="string">'Raleway'</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="按钮">按钮</h3>
<h4 id="raisedbutton">RaisedButton</h4>
<p><code>RaisedButton</code> 即&quot;漂浮&quot;按钮，它默认带有阴影和灰色背景。按下后，阴影会变大。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton(</span><br><span class="line">  child: Text(<span class="string">"normal"</span>),</span><br><span class="line">  onPressed: () &#123;&#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="flatbutton">FlatButton</h4>
<p><code>FlatButton</code>即扁平按钮，默认背景透明并不带阴影。按下后，会有背景色</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FlatButton(</span><br><span class="line">  child: Text(<span class="string">"normal"</span>),</span><br><span class="line">  onPressed: () &#123;&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="outlinebutton">OutlineButton</h4>
<p><code>OutlineButton</code>默认有一个边框，不带阴影且背景透明。按下后，边框颜色会变亮、同时出现背景和阴影(较弱)。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OutlineButton(</span><br><span class="line">  child: Text(<span class="string">"normal"</span>),</span><br><span class="line">  onPressed: () &#123;&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="iconbutton">IconButton</h4>
<p><code>IconButton</code>是一个可点击的Icon，不包括文字，默认没有背景，点击后会出现背景。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IconButton(</span><br><span class="line">  icon: Icon(Icons.thumb_up),</span><br><span class="line">  onPressed: () &#123;&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="带图标的按钮">带图标的按钮</h4>
<p><code>RaisedButton</code>、<code>FlatButton</code>、<code>OutlineButton</code>都有一个<code>icon</code> 构造函数，通过它可以轻松创建带图标的按钮。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton.icon(</span><br><span class="line">  icon: Icon(Icons.send),</span><br><span class="line">  label: Text(<span class="string">"发送"</span>),</span><br><span class="line">  onPressed: _onPressed,</span><br><span class="line">),</span><br><span class="line">OutlineButton.icon(</span><br><span class="line">  icon: Icon(Icons.add),</span><br><span class="line">  label: Text(<span class="string">"添加"</span>),</span><br><span class="line">  onPressed: _onPressed,</span><br><span class="line">),</span><br><span class="line">FlatButton.icon(</span><br><span class="line">  icon: Icon(Icons.info),</span><br><span class="line">  label: Text(<span class="string">"详情"</span>),</span><br><span class="line">  onPressed: _onPressed,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h4 id="自定义按钮外观">自定义按钮外观</h4>
<p>按钮外观可以通过其属性来定义，不同按钮属性大同小异。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FlatButton(&#123;</span><br><span class="line">  ...  </span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.onPressed, <span class="comment">//按钮点击回调</span></span><br><span class="line">  <span class="keyword">this</span>.textColor, <span class="comment">//按钮文字颜色</span></span><br><span class="line">  <span class="keyword">this</span>.disabledTextColor, <span class="comment">//按钮禁用时的文字颜色</span></span><br><span class="line">  <span class="keyword">this</span>.color, <span class="comment">//按钮背景颜色</span></span><br><span class="line">  <span class="keyword">this</span>.disabledColor,<span class="comment">//按钮禁用时的背景颜色</span></span><br><span class="line">  <span class="keyword">this</span>.highlightColor, <span class="comment">//按钮按下时的背景颜色</span></span><br><span class="line">  <span class="keyword">this</span>.splashColor, <span class="comment">//点击时，水波动画中水波的颜色</span></span><br><span class="line">  <span class="keyword">this</span>.colorBrightness,<span class="comment">//按钮主题，默认是浅色主题 </span></span><br><span class="line">  <span class="keyword">this</span>.padding, <span class="comment">//按钮的填充</span></span><br><span class="line">  <span class="keyword">this</span>.shape, <span class="comment">//外形</span></span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.child, <span class="comment">//按钮的内容</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="image及icon">Image及ICON</h3>
<h4 id="image">Image</h4>
<p><code>Image</code>组件来加载并显示图片，<code>Image</code>的数据源可以是asset、文件、内存以及网络。<code>Image</code> widget有一个必选的<code>image</code>参数，它对应一个ImageProvider。</p>
<h5 id="imageprovider">ImageProvider</h5>
<p><code>ImageProvider</code> 是一个抽象类，主要定义了图片数据获取的接口<code>load()</code>，从不同的数据源获取图片需要实现不同的<code>ImageProvider</code> ，如<code>AssetImage</code>是实现了从Asset中加载图片的ImageProvider，而<code>NetworkImage</code>实现了从网络加载图片的ImageProvider。</p>
<h5 id="从asset中加载图片">从asset中加载图片</h5>
<ol>
<li>在工程根目录下创建一个<code>images目录</code>，并将图片avatar.png拷贝到该目录。</li>
<li>在<code>pubspec.yaml</code>中的<code>flutter</code>部分添加如下内容：</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">assets:</span></span><br><span class="line"><span class="bullet">   -</span> <span class="string">images/avatar.png</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>加载该图片</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Image(</span><br><span class="line">  image: AssetImage(<span class="string">"images/avatar.png"</span>),</span><br><span class="line">  width: <span class="number">100.0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>Image也提供了一个快捷的构造函数<code>Image.asset</code></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Image.asset(<span class="string">"images/avatar.png"</span>,</span><br><span class="line">  width: <span class="number">100.0</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="从网络加载图片">从网络加载图片</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Image(</span><br><span class="line">  image: NetworkImage(</span><br><span class="line">      <span class="string">"https://avatars2.githubusercontent.com/u/20411648?s=460&amp;v=4"</span>),</span><br><span class="line">  width: <span class="number">100.0</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Image也提供了一个快捷的构造函数<code>Image.network</code></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Image.network(</span><br><span class="line">  <span class="string">"https://avatars2.githubusercontent.com/u/20411648?s=460&amp;v=4"</span>,</span><br><span class="line">  width: <span class="number">100.0</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="参数">参数</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Image(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">this</span>.width, <span class="comment">//图片的宽</span></span><br><span class="line">  <span class="keyword">this</span>.height, <span class="comment">//图片高度</span></span><br><span class="line">  <span class="keyword">this</span>.color, <span class="comment">//图片的混合色值</span></span><br><span class="line">  <span class="keyword">this</span>.colorBlendMode, <span class="comment">//混合模式</span></span><br><span class="line">  <span class="keyword">this</span>.fit,<span class="comment">//缩放模式</span></span><br><span class="line">  <span class="keyword">this</span>.alignment = Alignment.center, <span class="comment">//对齐方式</span></span><br><span class="line">  <span class="keyword">this</span>.repeat = ImageRepeat.noRepeat, <span class="comment">//重复方式</span></span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>width</code>、<code>height</code>：用于设置图片的宽、高，当不指定宽高时，图片会根据当前父容器的限制，尽可能的显示其原始大小，如果只设置<code>width</code>、<code>height</code>的其中一个，那么另一个属性默认会按比例缩放，但可以通过下面介绍的<code>fit</code>属性来指定适应规则。</li>
<li><code>fit</code>：该属性用于在图片的显示空间和图片本身大小不同时指定图片的适应模式。适应模式是在<code>BoxFit</code>中定义，它是一个枚举类型，有如下值：
<ul>
<li><code>fill</code>：会拉伸填充满显示空间，图片本身长宽比会发生变化，图片会变形。</li>
<li><code>cover</code>：会按图片的长宽比放大后居中填满显示空间，图片不会变形，超出显示空间部分会被剪裁。</li>
<li><code>contain</code>：这是图片的默认适应规则，图片会在保证图片本身长宽比不变的情况下缩放以适应当前显示空间，图片不会变形。</li>
<li><code>fitWidth</code>：图片的宽度会缩放到显示空间的宽度，高度会按比例缩放，然后居中显示，图片不会变形，超出显示空间部分会被剪裁。</li>
<li><code>fitHeight</code>：图片的高度会缩放到显示空间的高度，宽度会按比例缩放，然后居中显示，图片不会变形，超出显示空间部分会被剪裁。</li>
<li><code>none</code>：图片没有适应策略，会在显示空间内显示图片，如果图片比显示空间大，则显示空间只会显示图片中间部分。</li>
</ul>
</li>
</ul>
<h5 id="image缓存">Image缓存</h5>
<p>Flutter框架对加载过的图片是有缓存的（内存），默认最大缓存数量是1000，最大缓存空间为100M</p>
<h4 id="icon">ICON</h4>
<p>Flutter中，可以像Web开发一样使用iconfont，iconfont即“字体图标”，它是将图标做成字体文件，然后通过指定不同的字符而显示不同的图片。</p>
<p>有如下优势：</p>
<ol>
<li>体积小：可以减小安装包大小。</li>
<li>矢量的：iconfont都是矢量图标，放大不会影响其清晰度。</li>
<li>可以应用文本样式：可以像文本一样改变字体图标的颜色、大小对齐等。</li>
<li>可以通过TextSpan和文本混用。</li>
</ol>
<h5 id="使用material-design字体图标">使用Material Design字体图标</h5>
<p>Flutter默认包含了一套Material Design的字体图标，在<code>pubspec.yaml</code>文件中的配置如下</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flutter:</span></span><br><span class="line"><span class="attr">  uses-material-design:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Material Design所有图标可以在其官网查看：<a href="https://material.io/tools/icons/" target="_blank" rel="noopener">https://material.io/tools/icons/</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> icons = <span class="string">""</span>;</span><br><span class="line"><span class="comment">// accessible: &amp;#xE914; or 0xE914 or E914</span></span><br><span class="line">icons += <span class="string">"\uE914"</span>;</span><br><span class="line"><span class="comment">// error: &amp;#xE000; or 0xE000 or E000</span></span><br><span class="line">icons += <span class="string">" \uE000"</span>;</span><br><span class="line"><span class="comment">// fingerprint: &amp;#xE90D; or 0xE90D or E90D</span></span><br><span class="line">icons += <span class="string">" \uE90D"</span>;</span><br><span class="line"></span><br><span class="line">Text(icons,</span><br><span class="line">  style: TextStyle(</span><br><span class="line">      fontFamily: <span class="string">"MaterialIcons"</span>,</span><br><span class="line">      fontSize: <span class="number">24.0</span>,</span><br><span class="line">      color: Colors.green</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这样可以显示3个icon</p>
<h5 id="使用自定义字体图标">使用自定义字体图标</h5>
<ol>
<li>
<p>导入字体图标文件；这一步和导入字体文件相同，假设我们的字体图标文件保存在项目根目录下，路径为&quot;fonts/iconfont.ttf&quot;：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fonts:</span></span><br><span class="line"><span class="attr">  - family:</span> <span class="string">myIcon</span>  <span class="comment">#指定一个字体名</span></span><br><span class="line"><span class="attr">    fonts:</span></span><br><span class="line"><span class="attr">      - asset:</span> <span class="string">fonts/iconfont.ttf</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>为了使用方便，我们定义一个<code>MyIcons</code>类，功能和<code>Icons</code>类一样：将字体文件中的所有图标都定义成静态变量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyIcons</span></span>&#123;</span><br><span class="line">  <span class="comment">// book 图标</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> IconData book = <span class="keyword">const</span> IconData(</span><br><span class="line">      <span class="number">0xe614</span>, </span><br><span class="line">      fontFamily: <span class="string">'myIcon'</span>, </span><br><span class="line">      matchTextDirection: <span class="keyword">true</span></span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// 微信图标</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> IconData wechat = <span class="keyword">const</span> IconData(</span><br><span class="line">      <span class="number">0xec7d</span>,  </span><br><span class="line">      fontFamily: <span class="string">'myIcon'</span>, </span><br><span class="line">      matchTextDirection: <span class="keyword">true</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="单选开关和复选框">单选开关和复选框</h3>
<p>Material 组件库中提供了Material风格的单选开关<code>Switch</code>和复选框<code>Checkbox</code>。它们都是继承自<code>StatefulWidget</code>，但它们本身不会保存当前选中状态，选中状态都是由父组件来管理的。当<code>Switch</code>或<code>Checkbox</code>被点击时，会触发它们的<code>onChanged</code>回调，我们可以在此回调中处理选中状态改变逻辑</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Switch(</span><br><span class="line">         value: _switchSelected,<span class="comment">//当前状态</span></span><br><span class="line">         onChanged:(value)&#123;</span><br><span class="line">           <span class="comment">//重新构建页面  </span></span><br><span class="line">           setState(() &#123;</span><br><span class="line">             _switchSelected=value;</span><br><span class="line">           &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">       ),</span><br><span class="line">       Checkbox(</span><br><span class="line">         value: _checkboxSelected,</span><br><span class="line">         activeColor: Colors.red, <span class="comment">//选中时的颜色</span></span><br><span class="line">         onChanged:(value)&#123;</span><br><span class="line">           setState(() &#123;</span><br><span class="line">             _checkboxSelected=value;</span><br><span class="line">           &#125;);</span><br><span class="line">         &#125; ,</span><br></pre></td></tr></table></figure>
<h3 id="输入框及表单">输入框及表单</h3>
<p>Material组件库中提供了输入框组件<code>TextField</code>和表单组件<code>Form</code>。</p>
<h4 id="textfield">TextField</h4>
<p><code>TextField</code>用于文本输入</p>
<p>重要属性：</p>
<ul>
<li><code>controller</code>：编辑框的控制器，通过它可以设置/获取编辑框的内容、选择编辑内容、监听编辑文本改变事件。大多数情况下我们都需要显式提供一个<code>controller</code>来与文本框交互。如果没有提供<code>controller</code>，则<code>TextField</code>内部会自动创建一个。</li>
<li><code>focusNode</code>：用于控制<code>TextField</code>是否占有当前键盘的输入焦点。它是我们和键盘交互的一个句柄（handle）。</li>
<li><code>InputDecoration</code>：用于控制<code>TextField</code>的外观显示，如提示文本、背景颜色、边框等。</li>
<li><code>keyboardType</code>：用于设置该输入框默认的键盘输入类型。</li>
<li><code>textInputAction</code>：键盘动作按钮图标(即回车键位图标)，它是一个枚举值，有多个可选值</li>
<li><code>style</code>：正在编辑的文本样式。</li>
<li><code>textAlign</code>: 输入框内编辑文本在水平方向的对齐方式。</li>
<li><code>autofocus</code>: 是否自动获取焦点。</li>
<li><code>obscureText</code>：是否隐藏正在编辑的文本，如用于输入密码的场景等，文本内容会用“•”替换。</li>
<li><code>maxLines</code>：输入框的最大行数，默认为1；如果为<code>null</code>，则无行数限制。</li>
<li><code>maxLength</code>和<code>maxLengthEnforced</code> ：<code>maxLength</code>代表输入框文本的最大长度，设置后输入框右下角会显示输入的文本计数。<code>maxLengthEnforced</code>决定当输入文本长度超过<code>maxLength</code>时是否阻止输入，为<code>true</code>时会阻止输入，为<code>false</code>时不会阻止输入但输入框会变红。</li>
<li><code>onChange</code>：输入框内容改变时的回调函数；注：内容改变事件也可以通过<code>controller</code>来监听。</li>
<li><code>onEditingComplete</code>和<code>onSubmitted</code>：这两个回调都是在输入框输入完成时触发，比如按了键盘的完成键（对号图标）或搜索键（🔍图标）。不同的是两个回调签名不同，<code>onSubmitted</code>回调是<code>ValueChanged&lt;String&gt;</code>类型，它接收当前输入内容做为参数，而<code>onEditingComplete</code>不接收参数。</li>
<li><code>inputFormatters</code>：用于指定输入格式；当用户输入内容改变时，会根据指定的格式来校验。</li>
<li><code>enable</code>：如果为<code>false</code>，则输入框会被禁用，禁用状态不接收输入和事件，同时显示禁用态样式（在其<code>decoration</code>中定义）。</li>
<li><code>cursorWidth</code>、<code>cursorRadius</code>和<code>cursorColor</code>：这三个属性是用于自定义输入框光标宽度、圆角和颜色的。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TextField(</span><br><span class="line">           decoration: InputDecoration(</span><br><span class="line">               labelText: <span class="string">"密码"</span>,</span><br><span class="line">               hintText: <span class="string">"您的登录密码"</span>,</span><br><span class="line">               prefixIcon: Icon(Icons.lock)</span><br><span class="line">           ),</span><br><span class="line">           obscureText: <span class="keyword">true</span>,</span><br><span class="line">         ),</span><br></pre></td></tr></table></figure>
<h5 id="获取输入内容">获取输入内容</h5>
<p>获取输入内容有两种方式：</p>
<ol>
<li>定义两个变量，用于保存用户名和密码，然后在<code>onChange</code>触发时，各自保存一下输入内容。</li>
<li>通过<code>controller</code>直接获取。</li>
</ol>
<p>第一种方式比较简单，不在举例，我们来重点看一下第二种方式：</p>
<p>定义一个<code>controller</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个controller</span></span><br><span class="line">TextEditingController _unameController = TextEditingController();</span><br></pre></td></tr></table></figure>
<p>然后设置输入框controller：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TextField(</span><br><span class="line">    autofocus: <span class="keyword">true</span>,</span><br><span class="line">    controller: _unameController, <span class="comment">//设置controller</span></span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>通过controller获取输入框内容</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(_unameController.text)</span><br></pre></td></tr></table></figure>
<h5 id="监听文本变化">监听文本变化</h5>
<p>监听文本变化也有两种方式：</p>
<ol>
<li>
<p>设置<code>onChange</code>回调，如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TextField(</span><br><span class="line">    autofocus: <span class="keyword">true</span>,</span><br><span class="line">    onChanged: (v) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"onChange: $v"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>通过<code>controller</code>监听，如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="comment">//监听输入改变  </span></span><br><span class="line">  _unameController.addListener(()&#123;</span><br><span class="line">    <span class="built_in">print</span>(_unameController.text);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="控制焦点">控制焦点</h5>
<p>焦点可以通过<code>FocusNode</code>和<code>FocusScopeNode</code>来控制，默认情况下，焦点由<code>FocusScope</code>来管理，它代表焦点控制范围，可以在这个范围内可以通过<code>FocusScopeNode</code>在输入框之间移动焦点、设置默认焦点等。我们可以通过<code>FocusScope.of(context)</code> 来获取Widget树中默认的<code>FocusScopeNode</code></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">  FocusNode focusNode1 = <span class="keyword">new</span> FocusNode();</span><br><span class="line">  FocusNode focusNode2 = <span class="keyword">new</span> FocusNode();</span><br><span class="line">  FocusScopeNode focusScopeNode;</span><br><span class="line"></span><br><span class="line">TextField(</span><br><span class="line">            autofocus: <span class="keyword">true</span>, </span><br><span class="line">            focusNode: focusNode1,<span class="comment">//关联focusNode1</span></span><br><span class="line">            decoration: InputDecoration(</span><br><span class="line">                labelText: <span class="string">"input1"</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          TextField(</span><br><span class="line">            focusNode: focusNode2,<span class="comment">//关联focusNode2</span></span><br><span class="line">            decoration: InputDecoration(</span><br><span class="line">                labelText: <span class="string">"input2"</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">"移动焦点"</span>),</span><br><span class="line">                  onPressed: () &#123;</span><br><span class="line">                    <span class="comment">//将焦点从第一个TextField移到第二个TextField</span></span><br><span class="line">                    <span class="comment">// 这是一种写法 FocusScope.of(context).requestFocus(focusNode2);</span></span><br><span class="line">                    <span class="comment">// 这是第二种写法</span></span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">null</span> == focusScopeNode)&#123;</span><br><span class="line">                      focusScopeNode = FocusScope.of(context);</span><br><span class="line">                    &#125;</span><br><span class="line">                    focusScopeNode.requestFocus(focusNode2);</span><br><span class="line">                  &#125;,</span><br><span class="line">                ),</span><br><span class="line">                RaisedButton(</span><br><span class="line">                  child: Text(<span class="string">"隐藏键盘"</span>),</span><br><span class="line">                  onPressed: () &#123;</span><br><span class="line">                    <span class="comment">// 当所有编辑框都失去焦点时键盘就会收起  </span></span><br><span class="line">                    focusNode1.unfocus();</span><br><span class="line">                    focusNode2.unfocus();</span><br><span class="line">                  &#125;,</span><br><span class="line">                ),</span><br></pre></td></tr></table></figure>
<h5 id="监听焦点状态">监听焦点状态</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// focusNode绑定输入框   </span></span><br><span class="line">TextField(focusNode: focusNode);</span><br><span class="line">...</span><br><span class="line"><span class="comment">// 监听焦点变化    </span></span><br><span class="line">focusNode.addListener(()&#123;</span><br><span class="line">   <span class="built_in">print</span>(focusNode.hasFocus);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="自定义样式">自定义样式</h5>
<p>虽然我们可以通过<code>decoration</code>属性来定义输入框样式</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">TextField(</span><br><span class="line">  decoration: InputDecoration(</span><br><span class="line">    labelText: <span class="string">"请输入用户名"</span>,</span><br><span class="line">    prefixIcon: Icon(Icons.person),</span><br><span class="line">    <span class="comment">// 未获得焦点下划线设为灰色</span></span><br><span class="line">    enabledBorder: UnderlineInputBorder(</span><br><span class="line">      borderSide: BorderSide(color: Colors.grey),</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment">//获得焦点下划线设为蓝色</span></span><br><span class="line">    focusedBorder: UnderlineInputBorder(</span><br><span class="line">      borderSide: BorderSide(color: Colors.blue),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h3 id="表单form">表单Form</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Form(&#123;</span><br><span class="line">  <span class="meta">@required</span> Widget child,</span><br><span class="line">  <span class="built_in">bool</span> autovalidate = <span class="keyword">false</span>,</span><br><span class="line">  WillPopCallback onWillPop,</span><br><span class="line">  VoidCallback onChanged,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>autovalidate</code>：是否自动校验输入内容；当为<code>true</code>时，每一个子FormField内容发生变化时都会自动校验合法性，并直接显示错误信息。否则，需要通过调用<code>FormState.validate()</code>来手动校验。</li>
<li><code>onWillPop</code>：决定<code>Form</code>所在的路由是否可以直接返回（如点击返回按钮），该回调返回一个<code>Future</code>对象，如果Future的最终结果是<code>false</code>，则当前路由不会返回；如果为<code>true</code>，则会返回到上一个路由。此属性通常用于拦截返回按钮。</li>
<li><code>onChanged</code>：<code>Form</code>的任意一个子<code>FormField</code>内容发生变化时会触发此回调。</li>
</ul>
<h4 id="formfield">FormField</h4>
<p><code>Form</code>的子孙元素必须是<code>FormField</code>类型。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FormField(&#123;</span><br><span class="line">  ...</span><br><span class="line">  FormFieldSetter&lt;T&gt; onSaved, <span class="comment">//保存回调</span></span><br><span class="line">  FormFieldValidator&lt;T&gt;  validator, <span class="comment">//验证回调</span></span><br><span class="line">  T initialValue, <span class="comment">//初始值</span></span><br><span class="line">  <span class="built_in">bool</span> autovalidate = <span class="keyword">false</span>, <span class="comment">//是否自动校验。</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>为了方便使用，Flutter提供了一个<code>TextFormField</code>组件，它继承自<code>FormField</code>类。</p>
<h4 id="formstate">FormState</h4>
<p><code>FormState</code>为<code>Form</code>的<code>State</code>类，可以通过<code>Form.of()</code>或<code>GlobalKey</code>获得</p>
<p>其常用的三个方法：</p>
<ul>
<li><code>FormState.validate()</code>：调用此方法后，会调用<code>Form</code>子孙<code>FormField的validate</code>回调，如果有一个校验失败，则返回false，所有校验失败项都会返回用户返回的错误提示。</li>
<li><code>FormState.save()</code>：调用此方法后，会调用<code>Form</code>子孙<code>FormField</code>的<code>save</code>回调，用于保存表单内容</li>
<li><code>FormState.reset()</code>：调用此方法后，会将子孙<code>FormField</code>的内容清空。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">child: Form(</span><br><span class="line">          key: _formKey, <span class="comment">//设置globalKey，用于后面获取FormState</span></span><br><span class="line">          autovalidate: <span class="keyword">true</span>, <span class="comment">//开启自动校验</span></span><br><span class="line">          child: Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              TextFormField(</span><br><span class="line">                  autofocus: <span class="keyword">true</span>,</span><br><span class="line">                  controller: _unameController,</span><br><span class="line">                  decoration: InputDecoration(</span><br><span class="line">                      labelText: <span class="string">"用户名"</span>,</span><br><span class="line">                      hintText: <span class="string">"用户名或邮箱"</span>,</span><br><span class="line">                      icon: Icon(Icons.person)</span><br><span class="line">                  ),</span><br><span class="line">                  <span class="comment">// 校验用户名</span></span><br><span class="line">                  validator: (v) &#123;</span><br><span class="line">                    <span class="keyword">return</span> v</span><br><span class="line">                        .trim()</span><br><span class="line">                        .length &gt; <span class="number">0</span> ? <span class="keyword">null</span> : <span class="string">"用户名不能为空"</span>;</span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">              ),</span><br><span class="line">              TextFormField(</span><br><span class="line">                  controller: _pwdController,</span><br><span class="line">                  decoration: InputDecoration(</span><br><span class="line">                      labelText: <span class="string">"密码"</span>,</span><br><span class="line">                      hintText: <span class="string">"您的登录密码"</span>,</span><br><span class="line">                      icon: Icon(Icons.lock)</span><br><span class="line">                  ),</span><br><span class="line">                  obscureText: <span class="keyword">true</span>,</span><br><span class="line">                  <span class="comment">//校验密码</span></span><br><span class="line">                  validator: (v) &#123;</span><br><span class="line">                    <span class="keyword">return</span> v</span><br><span class="line">                        .trim()</span><br><span class="line">                        .length &gt; <span class="number">5</span> ? <span class="keyword">null</span> : <span class="string">"密码不能少于6位"</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">              ),</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line"> 校验：</span><br><span class="line"><span class="keyword">if</span>((_formKey.currentState <span class="keyword">as</span> FormState).validate())&#123;</span><br><span class="line"> <span class="comment">//验证通过提交数据</span></span><br><span class="line">&#125;</span><br><span class="line">              </span><br><span class="line">或者：                          </span><br><span class="line">Expanded(</span><br><span class="line"> <span class="comment">// 通过Builder来获取RaisedButton所在widget树的真正context(Element) </span></span><br><span class="line">  child:Builder(builder: (context)&#123;</span><br><span class="line">    <span class="keyword">return</span> RaisedButton(</span><br><span class="line">      ...</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="comment">//由于本widget也是Form的子代widget，所以可以通过下面方式获取FormState  </span></span><br><span class="line">        <span class="keyword">if</span>(Form.of(context).validate())&#123;</span><br><span class="line">          <span class="comment">//验证通过提交数据</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="进度指示器progress">进度指示器Progress</h3>
<p>Material 组件库中提供了两种进度指示器：<code>LinearProgressIndicator</code>和<code>CircularProgressIndicator</code>，它们都可以同时用于精确的进度指示和模糊的进度指示。</p>
<h4 id="linearprogressindicator">LinearProgressIndicator</h4>
<p>LinearProgressIndicator是一个线性、条状的进度条</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LinearProgressIndicator(&#123;</span><br><span class="line">  <span class="built_in">double</span> value,</span><br><span class="line">  Color backgroundColor,</span><br><span class="line">  Animation&lt;Color&gt; valueColor,</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>value</code>：<code>value</code>表示当前的进度，取值范围为[0,1]；如果<code>value</code>为<code>null</code>时则指示器会执行一个循环动画（模糊进度）；当<code>value</code>不为<code>null</code>时，指示器为一个具体进度的进度条。</li>
<li><code>backgroundColor</code>：指示器的背景色。</li>
<li><code>valueColor</code>: 指示器的进度条颜色；值得注意的是，该值类型是<code>Animation&lt;Color&gt;</code>，这允许我们对进度条的颜色也可以指定动画。如果我们不需要对进度条颜色执行动画，换言之，我们想对进度条应用一种固定的颜色，此时我们可以通过<code>AlwaysStoppedAnimation</code>来指定。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊进度条(会执行一个动画)</span></span><br><span class="line">LinearProgressIndicator(</span><br><span class="line">  backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">  valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">),</span><br><span class="line"><span class="comment">//进度条显示50%</span></span><br><span class="line">LinearProgressIndicator(</span><br><span class="line">  backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">  valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">  value: <span class="number">.5</span>, </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="circularprogressindicator">CircularProgressIndicator</h3>
<p><code>CircularProgressIndicator</code>是一个圆形进度条，定义如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> CircularProgressIndicator(&#123;</span><br><span class="line">  <span class="built_in">double</span> value,</span><br><span class="line">  Color backgroundColor,</span><br><span class="line">  Animation&lt;Color&gt; valueColor,</span><br><span class="line">  <span class="keyword">this</span>.strokeWidth = <span class="number">4.0</span>,</span><br><span class="line">  ...   </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>前三个参数和<code>LinearProgressIndicator</code>相同，不再赘述。<code>strokeWidth</code> 表示圆形进度条的粗细。示例如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊进度条(会执行一个旋转动画)</span></span><br><span class="line">CircularProgressIndicator(</span><br><span class="line">  backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">  valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">),</span><br><span class="line"><span class="comment">//进度条显示50%，会显示一个半圆</span></span><br><span class="line">CircularProgressIndicator(</span><br><span class="line">  backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">  valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">  value: <span class="number">.5</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h4 id="自定义尺寸">自定义尺寸</h4>
<p>其实<code>LinearProgressIndicator</code>和<code>CircularProgressIndicator</code>都是取父容器的尺寸作为绘制的边界的。知道了这点，我们便可以通过尺寸限制类Widget，如<code>ConstrainedBox</code>、<code>SizedBox</code></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 线性进度条高度指定为3</span></span><br><span class="line">SizedBox(</span><br><span class="line">  height: <span class="number">3</span>,</span><br><span class="line">  child: LinearProgressIndicator(</span><br><span class="line">    backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">    valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">    value: <span class="number">.5</span>,</span><br><span class="line">  ),</span><br><span class="line">),</span><br><span class="line"><span class="comment">// 圆形进度条直径指定为100</span></span><br><span class="line">SizedBox(</span><br><span class="line">  height: <span class="number">100</span>,</span><br><span class="line">  width: <span class="number">100</span>,</span><br><span class="line">  child: CircularProgressIndicator(</span><br><span class="line">    backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">    valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">    value: <span class="number">.7</span>,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h2 id="布局widgets">布局widgets</h2>
<h3 id="线性布局">线性布局</h3>
<h4 id="row">Row</h4>
<p>在水平方向创建灵活的布局。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body: Row(</span><br><span class="line">  children:[</span><br><span class="line">    Text(&quot;Flutter1&quot;),</span><br><span class="line">    Text(&quot;Flutter2&quot;)</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<ul>
<li><code>textDirection</code>：表示水平方向子组件的布局顺序(是从左往右还是从右往左)，默认为系统当前Locale环境的文本方向(如中文、英语都是从左往右，而阿拉伯语是从右往左)。</li>
<li><code>mainAxisSize</code>：表示<code>Row</code>在主轴(水平)方向占用的空间，默认是<code>MainAxisSize.max</code>，表示尽可能多的占用水平方向的空间，此时无论子widgets实际占用多少水平空间，<code>Row</code>的宽度始终等于水平方向的最大宽度；而<code>MainAxisSize.min</code>表示尽可能少的占用水平空间，当子组件没有占满水平剩余空间，则<code>Row</code>的实际宽度等于所有子组件占用的的水平空间；</li>
<li><code>mainAxisAlignment</code>：表示子组件在<code>Row</code>所占用的水平空间内对齐方式，如果<code>mainAxisSize</code>值为<code>MainAxisSize.min</code>，则此属性无意义，因为子组件的宽度等于<code>Row</code>的宽度。只有当<code>mainAxisSize</code>的值为<code>MainAxisSize.max</code>时，此属性才有意义，<code>MainAxisAlignment.start</code>表示沿<code>textDirection</code>的初始方向对齐，如<code>textDirection</code>取值为<code>TextDirection.ltr</code>时，则<code>MainAxisAlignment.start</code>表示左对齐，<code>textDirection</code>取值为<code>TextDirection.rtl</code>时表示从右对齐。而<code>MainAxisAlignment.end</code>和<code>MainAxisAlignment.start</code>正好相反；<code>MainAxisAlignment.center</code>表示居中对齐。读者可以这么理解：<code>textDirection</code>是<code>mainAxisAlignment</code>的参考系。</li>
<li><code>verticalDirection</code>：表示<code>Row</code>纵轴（垂直）的对齐方向，默认是<code>VerticalDirection.down</code>，表示从上到下。</li>
<li><code>crossAxisAlignment</code>：表示子组件在纵轴方向的对齐方式，<code>Row</code>的高度等于子组件中最高的子元素高度，它的取值和<code>MainAxisAlignment</code>一样(包含<code>start</code>、<code>end</code>、 <code>center</code>三个值)，不同的是<code>crossAxisAlignment</code>的参考系是<code>verticalDirection</code>，即<code>verticalDirection</code>值为<code>VerticalDirection.down</code>时<code>crossAxisAlignment.start</code>指顶部对齐，<code>verticalDirection</code>值为<code>VerticalDirection.up</code>时，<code>crossAxisAlignment.start</code>指底部对齐；而<code>crossAxisAlignment.end</code>和<code>crossAxisAlignment.start</code>正好相反；</li>
<li><code>children</code> ：子组件数组。</li>
</ul>
<h4 id="column">Column</h4>
<p>在垂直方向创建灵活的布局。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body: Column(</span><br><span class="line">  children:[</span><br><span class="line">    Text(&quot;Flutter1&quot;),</span><br><span class="line">    Text(&quot;Flutter2&quot;)</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<p><strong>如果<code>Row</code>里面嵌套<code>Row</code>，或者<code>Column</code>里面再嵌套<code>Column</code>，那么只有最外面的<code>Row</code>或<code>Column</code>会占用尽可能大的空间，里面<code>Row</code>或<code>Column</code>所占用的空间为实际大小</strong></p>
<h5 id="对齐-widgets">对齐 widgets</h5>
<p>你可以使用 <code>mainAxisAlignment</code> 和 <code>crossAxisAlignment</code> 属性控制行或列如何对齐其子项。</p>
<p><strong>MainAxisAlignment</strong>：主轴方向上的对齐方式，会对child的位置起作用，默认是start。</p>
<p>其中MainAxisAlignment枚举值：</p>
<ul>
<li>center：将children放置在主轴的中心；</li>
<li>end：将children放置在主轴的末尾；</li>
<li>spaceAround：将主轴方向上的空白区域均分，使得children之间的空白区域相等，但是首尾child的空白区域为1/2；</li>
<li>spaceBetween：将主轴方向上的空白区域均分，使得children之间的空白区域相等，首尾child都靠近首尾，没有间隙；</li>
<li>spaceEvenly：将主轴方向上的空白区域均分，使得children之间的空白区域相等，包括首尾child；</li>
<li>start：将children放置在主轴的起点；</li>
</ul>
<p><strong>CrossAxisAlignment</strong>：children在交叉轴方向的对齐方式</p>
<p>CrossAxisAlignment枚举值有如下几种：</p>
<ul>
<li>baseline：在交叉轴方向，使得children的baseline对齐；</li>
<li>center：children在交叉轴上居中展示；</li>
<li>end：children在交叉轴上末尾展示；</li>
<li>start：children在交叉轴上起点处展示；</li>
<li>stretch：让children填满交叉轴方向；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body: Column(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: [Text(&quot;1&quot;),Text(&quot;2&quot;),Text(&quot;3&quot;),Text(&quot;4&quot;)],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h4 id="mainaxissize">MainAxisSize</h4>
<p>在主轴方向占有空间的值，默认是max。</p>
<ul>
<li>max：根据传入的布局约束条件，最大化主轴方向的可用空间；</li>
<li>min：与max相反，是最小化主轴方向的可用空间；</li>
</ul>
<h3 id="弹性布局">弹性布局</h3>
<h4 id="flex">Flex</h4>
<p>Flex<code>组件可以沿着水平或垂直方向排列子组件，如果你知道主轴方向，使用</code>Row<code>或</code>Column<code>会方便一些，因为</code>Row<code>和</code>Column<code>都继承自</code>Flex<code>，参数基本相同，所以能使用Flex的地方基本上都可以使用</code>Row<code>或</code>Column。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flex(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.direction, <span class="comment">//弹性布局的方向, Row默认为水平方向，Column默认为垂直方向</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="expanded">Expanded</h4>
<p>可以按比例“扩伸” <code>Row</code>、<code>Column</code>和<code>Flex</code>子组件所占用的空间。当某个布局太大而超出屏幕时，受影响的边缘会出现黄色和黑色条纹图案。通过使用 <a href="https://api.flutter-io.cn/flutter/widgets/Expanded-class.html" target="_blank" rel="noopener"><code>Expanded</code></a> widget，可以调整 widgets 的大小以适合行或列。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">body: Row(</span><br><span class="line">  children: [</span><br><span class="line">    Expanded(</span><br><span class="line">      child:  Text(&quot;1&quot;),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child:  Text(&quot;22222222222222222222222222222222222222222222222&quot;),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child:  Text(&quot;33333333333333333333333333&quot;),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child:  Text(&quot;44444444444444444&quot;),</span><br><span class="line">    )],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<p>如果不加，文本不会换行，且右边会出现黄色和黑色条纹图案，加了这几个text宽度会平分屏幕，同时自动换行</p>
<p>同时可以给 Expanded 设置宽度系数 flex: 2，那个该Expanded就会是其他的两倍。</p>
<p><code>Spacer</code>的功能是占用指定比例的空间，实际上它只是<code>Expanded</code>的一个包装类。</p>
<h3 id="流式布局">流式布局</h3>
<p>Flutter中通过<code>Wrap</code>和<code>Flow</code>来支持流式布局，比如超出屏幕的Row换成Wrap后溢出部分则会自动折行。</p>
<h4 id="wrap">Wrap</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Wrap(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">this</span>.direction = Axis.horizontal,</span><br><span class="line">  <span class="keyword">this</span>.alignment = WrapAlignment.start,</span><br><span class="line">  <span class="keyword">this</span>.spacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="keyword">this</span>.runAlignment = WrapAlignment.start,</span><br><span class="line">  <span class="keyword">this</span>.runSpacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="keyword">this</span>.crossAxisAlignment = WrapCrossAlignment.start,</span><br><span class="line">  <span class="keyword">this</span>.textDirection,</span><br><span class="line">  <span class="keyword">this</span>.verticalDirection = VerticalDirection.down,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>看一下<code>Wrap</code>特有的几个属性：</p>
<ul>
<li><code>spacing</code>：主轴方向子widget的间距</li>
<li><code>runSpacing</code>：纵轴方向的间距</li>
<li><code>runAlignment</code>：纵轴方向的对齐方式</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Wrap(</span><br><span class="line">  spacing: <span class="number">8.0</span>, <span class="comment">// 主轴(水平)方向间距</span></span><br><span class="line">  runSpacing: <span class="number">4.0</span>, <span class="comment">// 纵轴（垂直）方向间距</span></span><br><span class="line">  alignment: WrapAlignment.center, <span class="comment">//沿主轴方向居中</span></span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    <span class="keyword">new</span> Chip(</span><br><span class="line">      avatar: <span class="keyword">new</span> CircleAvatar(backgroundColor: Colors.blue, child: Text(<span class="string">'A'</span>)),</span><br><span class="line">      label: <span class="keyword">new</span> Text(<span class="string">'Hamilton'</span>),</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> Chip(</span><br><span class="line">      avatar: <span class="keyword">new</span> CircleAvatar(backgroundColor: Colors.blue, child: Text(<span class="string">'M'</span>)),</span><br><span class="line">      label: <span class="keyword">new</span> Text(<span class="string">'Lafayette'</span>),</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> Chip(</span><br><span class="line">      avatar: <span class="keyword">new</span> CircleAvatar(backgroundColor: Colors.blue, child: Text(<span class="string">'H'</span>)),</span><br><span class="line">      label: <span class="keyword">new</span> Text(<span class="string">'Mulligan'</span>),</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> Chip(</span><br><span class="line">      avatar: <span class="keyword">new</span> CircleAvatar(backgroundColor: Colors.blue, child: Text(<span class="string">'J'</span>)),</span><br><span class="line">      label: <span class="keyword">new</span> Text(<span class="string">'Laurens'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>放不下会自动换行</p>
<h4 id="flow">Flow</h4>
<p>我们一般很少会使用<code>Flow</code>，因为其过于复杂，需要自己实现子widget的位置转换，在很多场景下首先要考虑的是<code>Wrap</code>是否满足需求。<code>Flow</code>主要用于一些需要自定义布局策略或性能要求较高(如动画中)的场景。<code>Flow</code>有如下优点：</p>
<ul>
<li>性能好；<code>Flow</code>是一个对子组件尺寸以及位置调整非常高效的控件，<code>Flow</code>用转换矩阵在对子组件进行位置调整的时候进行了优化：在<code>Flow</code>定位过后，如果子组件的尺寸或者位置发生了变化，在<code>FlowDelegate</code>中的<code>paintChildren()</code>方法中调用<code>context.paintChild</code> 进行重绘，而<code>context.paintChild</code>在重绘时使用了转换矩阵，并没有实际调整组件位置。</li>
<li>灵活；由于我们需要自己实现<code>FlowDelegate</code>的<code>paintChildren()</code>方法，所以我们需要自己计算每一个组件的位置，因此，可以自定义布局策略。</li>
</ul>
<p>缺点：</p>
<ul>
<li>使用复杂。</li>
<li>不能自适应子组件大小，必须通过指定父容器大小或实现<code>TestFlowDelegate</code>的<code>getSize</code>返回固定大小。</li>
</ul>
<h3 id="层叠布局">层叠布局</h3>
<h4 id="stack">Stack</h4>
<p><code>Stack</code>允许子组件堆叠</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stack(&#123;</span><br><span class="line">  <span class="keyword">this</span>.alignment = AlignmentDirectional.topStart,</span><br><span class="line">  <span class="keyword">this</span>.textDirection,</span><br><span class="line">  <span class="keyword">this</span>.fit = StackFit.loose,</span><br><span class="line">  <span class="keyword">this</span>.overflow = Overflow.clip,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>alignment</code>：此参数决定如何去对齐没有定位（没有使用<code>Positioned</code>）或部分定位的子组件。所谓部分定位，在这里<strong>特指没有在某一个轴上定位：</strong><code>left</code>、<code>right</code>为横轴，<code>top</code>、<code>bottom</code>为纵轴，只要包含某个轴上的一个定位属性就算在该轴上有定位。</li>
<li><code>textDirection</code>：和<code>Row</code>、<code>Wrap</code>的<code>textDirection</code>功能一样，都用于确定<code>alignment</code>对齐的参考系，即：<code>textDirection</code>的值为<code>TextDirection.ltr</code>，则<code>alignment</code>的<code>start</code>代表左，<code>end</code>代表右，即<code>从左往右</code>的顺序；<code>textDirection</code>的值为<code>TextDirection.rtl</code>，则alignment的<code>start</code>代表右，<code>end</code>代表左，即<code>从右往左</code>的顺序。</li>
<li><code>fit</code>：此参数用于确定<strong>没有定位</strong>的子组件如何去适应<code>Stack</code>的大小。<code>StackFit.loose</code>表示使用子组件的大小，<code>StackFit.expand</code>表示扩伸到<code>Stack</code>的大小。</li>
<li><code>overflow</code>：此属性决定如何显示超出<code>Stack</code>显示空间的子组件；值为<code>Overflow.clip</code>时，超出部分会被剪裁（隐藏），值为<code>Overflow.visible</code> 时则不会。</li>
</ul>
<h4 id="positioned">Positioned</h4>
<p><code>Positioned</code>用于根据<code>Stack</code>的四个角来确定子组件的位置。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Positioned(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="keyword">this</span>.left, </span><br><span class="line">  <span class="keyword">this</span>.top,</span><br><span class="line">  <span class="keyword">this</span>.right,</span><br><span class="line">  <span class="keyword">this</span>.bottom,</span><br><span class="line">  <span class="keyword">this</span>.width,</span><br><span class="line">  <span class="keyword">this</span>.height,</span><br><span class="line">  <span class="meta">@required</span> Widget child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>left</code>、<code>top</code> 、<code>right</code>、 <code>bottom</code>分别代表离<code>Stack</code>左、上、右、底四边的距离。<code>width</code>和<code>height</code>用于指定需要定位元素的宽度和高度。注意，<code>Positioned</code>的<code>width</code>、<code>height</code> 和其它地方的意义稍微有点区别，此处用于配合<code>left</code>、<code>top</code> 、<code>right</code>、 <code>bottom</code>来定位组件，举个例子，在水平方向时，你只能指定<code>left</code>、<code>right</code>、<code>width</code>三个属性中的两个，如指定<code>left</code>和<code>width</code>后，<code>right</code>会自动算出(<code>left</code>+<code>width</code>)，如果同时指定三个属性则会报错，垂直方向同理。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">children: &lt;Widget&gt;[</span><br><span class="line">      Container(child: Text(<span class="string">"Hello world"</span>,style: TextStyle(color: Colors.white)),</span><br><span class="line">        color: Colors.red,</span><br><span class="line">      ),</span><br><span class="line">      Positioned(</span><br><span class="line">        left: <span class="number">18.0</span>,</span><br><span class="line">        child: Text(<span class="string">"I am Jack"</span>),</span><br><span class="line">      ),</span><br><span class="line">      Positioned(</span><br><span class="line">        top: <span class="number">18.0</span>,</span><br><span class="line">        child: Text(<span class="string">"Your friend"</span>),</span><br><span class="line">      )        </span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>
<h3 id="对齐和定位">对齐和定位</h3>
<h4 id="align">Align</h4>
<p><code>Align</code> 组件可以调整子组件的位置，并且可以根据子组件的宽高来确定自身的的宽高</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Align(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="keyword">this</span>.alignment = Alignment.center,</span><br><span class="line">  <span class="keyword">this</span>.widthFactor,</span><br><span class="line">  <span class="keyword">this</span>.heightFactor,</span><br><span class="line">  Widget child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>alignment</code> : 需要一个<code>AlignmentGeometry</code>类型的值，表示子组件在父组件中的起始位置。<code>AlignmentGeometry</code> 是一个抽象类，它有两个常用的子类：<code>Alignment</code>和 <code>FractionalOffset</code>，我们将在下面的示例中详细介绍。</li>
<li><code>widthFactor</code>和<code>heightFactor</code>是用于确定<code>Align</code> 组件本身宽高的属性；它们是两个缩放因子，会分别乘以子元素的宽、高，最终的结果就是<code>Align</code> 组件的宽高。如果值为<code>null</code>，则组件的宽高将会占用尽可能多的空间。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">child: Align(</span><br><span class="line">    alignment: Alignment.topRight,</span><br><span class="line">    child: FlutterLogo(</span><br><span class="line">      size: <span class="number">60</span>,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure>
<p><code>FlutterLogo</code> 是Flutter SDK提供的一个组件，内容就是Flutter的商标。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Align(</span><br><span class="line">  widthFactor: <span class="number">2</span>,</span><br><span class="line">  heightFactor: <span class="number">2</span>,</span><br><span class="line">  alignment: Alignment.topRight,</span><br><span class="line">  child: FlutterLogo(</span><br><span class="line">    size: <span class="number">60</span>,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<p>过同时指定<code>widthFactor</code>和<code>heightFactor</code> 为2也是可以达到同样的效果。</p>
<p><code>Align</code>和<code>Stack</code>/<code>Positioned</code>都可以用于指定子元素相对于父元素的偏移，但它们还是有两个主要区别：</p>
<ol>
<li>定位参考系统不同；<code>Stack</code>/<code>Positioned</code>定位的的参考系可以是父容器矩形的四个顶点；而<code>Align</code>则需要先通过<code>alignment</code> 参数来确定坐标原点，不同的<code>alignment</code>会对应不同原点，最终的偏移是需要通过<code>alignment</code>的转换公式来计算出。</li>
<li><code>Stack</code>可以有多个子元素，并且子元素可以堆叠，而<code>Align</code>只能有一个子元素，不存在堆叠</li>
</ol>
<h4 id="alignment">Alignment</h4>
<p>Alignment有两个属性<code>x</code>、<code>y</code>，分别表示在水平和垂直方向的偏移。<code>Alignment</code> Widget会以<strong>矩形的中心点作为坐标原点</strong>，即<code>Alignment(0.0, 0.0)</code> 。<code>x</code>、<code>y</code>的值从-1到1分别代表矩形左边到右边的距离和顶部到底边的距离</p>
<p><code>Alignment</code>可以通过其<strong>坐标转换公式</strong>将其坐标转为子元素的具体偏移坐标：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Alignment.x*childWidth/2+childWidth/2, Alignment.y*childHeight/2+childHeight/2)</span><br></pre></td></tr></table></figure>
<h4 id="fractionaloffset">FractionalOffset</h4>
<p><code>FractionalOffset</code> 继承自 <code>Alignment</code>，它和 <code>Alignment</code>唯一的区别就是坐标原点不同！<code>FractionalOffset</code> 的坐标原点为矩形的左侧顶。</p>
<p><code>FractionalOffset</code>的坐标转换公式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际偏移 = (FractionalOffse.x * childWidth, FractionalOffse.y * childHeight)</span><br></pre></td></tr></table></figure>
<h4 id="center">Center</h4>
<p>居中摆放组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body: Center(</span><br><span class="line">  child: Text(&quot;Flutter&quot;),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h2 id="容器类组件">容器类组件</h2>
<h4 id="padding">Padding</h4>
<h4 id="padding">Padding</h4>
<p><code>Padding</code>可以给其子节点添加填充（留白），和边距效果类似。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Padding(&#123;</span><br><span class="line">  ...</span><br><span class="line">  EdgeInsetsGeometry padding,</span><br><span class="line">  Widget child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>EdgeInsetsGeometry</code>是一个抽象类，开发中，我们一般都使用<code>EdgeInsets</code>类，</p>
<h4 id="edgeinsets">EdgeInsets</h4>
<p>我们看看<code>EdgeInsets</code>提供的便捷方法：</p>
<ul>
<li><code>fromLTRB(double left, double top, double right, double bottom)</code>：分别指定四个方向的填充。</li>
<li><code>all(double value)</code> : 所有方向均使用相同数值的填充。</li>
<li><code>only({left, top, right ,bottom })</code>：可以设置具体某个方向的填充(可以同时指定多个方向)。</li>
<li><code>symmetric({ vertical, horizontal })</code>：用于设置对称方向的填充，<code>vertical</code>指<code>top</code>和<code>bottom</code>，<code>horizontal</code>指<code>left</code>和<code>right</code>。</li>
</ul>
<h3 id="尺寸限制类容器">尺寸限制类容器</h3>
<p>尺寸限制类容器用于限制容器大小，Flutter中提供了多种这样的容器，如<code>ConstrainedBox</code>、<code>SizedBox</code>、<code>UnconstrainedBox</code>、<code>AspectRatio</code>等</p>
<h4 id="constrainedbox">ConstrainedBox</h4>
<p><code>ConstrainedBox</code>用于对子组件添加额外的约束</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Widget redBox=DecoratedBox(</span><br><span class="line">  decoration: BoxDecoration(color: Colors.red),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ConstrainedBox(</span><br><span class="line">  constraints: BoxConstraints(</span><br><span class="line">    minWidth: <span class="built_in">double</span>.infinity, <span class="comment">//宽度尽可能大</span></span><br><span class="line">    minHeight: <span class="number">50.0</span> <span class="comment">//最小高度为50像素</span></span><br><span class="line">  ),</span><br><span class="line">  child: Container(</span><br><span class="line">      height: <span class="number">5.0</span>, </span><br><span class="line">      child: redBox </span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>最终宽度为50像素。</p>
<h5 id="boxconstraints">BoxConstraints</h5>
<p>BoxConstraints用于设置限制条件，它的定义如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BoxConstraints(&#123;</span><br><span class="line">  <span class="keyword">this</span>.minWidth = <span class="number">0.0</span>, <span class="comment">//最小宽度</span></span><br><span class="line">  <span class="keyword">this</span>.maxWidth = <span class="built_in">double</span>.infinity, <span class="comment">//最大宽度</span></span><br><span class="line">  <span class="keyword">this</span>.minHeight = <span class="number">0.0</span>, <span class="comment">//最小高度</span></span><br><span class="line">  <span class="keyword">this</span>.maxHeight = <span class="built_in">double</span>.infinity <span class="comment">//最大高度</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>BoxConstraints还定义了一些便捷的构造函数，用于快速生成特定限制规则的BoxConstraints，如<code>BoxConstraints.tight(Size size)</code>，它可以生成给定大小的限制；<code>const BoxConstraints.expand()</code>可以生成一个尽可能大的用以填充另一个容器的BoxConstraints。</p>
<h4 id="sizedbox">SizedBox</h4>
<p><code>SizedBox</code>用于给子元素指定固定的宽高</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SizedBox(</span><br><span class="line">  width: <span class="number">80.0</span>,</span><br><span class="line">  height: <span class="number">80.0</span>,</span><br><span class="line">  child: redBox</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>实际上<code>SizedBox</code>只是<code>ConstrainedBox</code>的一个定制</p>
<h4 id="多重限制">多重限制</h4>
<p>如果某一个组件有多个父级<code>ConstrainedBox</code>限制，对于<code>minWidth</code>和<code>minHeight</code>来说，是取父子中相应数值较大的，对于max，则取最小的，即两者子集。</p>
<h4 id="unconstrainedbox">UnconstrainedBox</h4>
<p><code>UnconstrainedBox</code>不会对子组件产生任何限制，它允许其子组件按照其本身大小绘制。一般情况下，我们会很少直接使用此组件，但在&quot;去除&quot;多重限制的时候也许会有帮助</p>
<h4 id="其它限制类容器">其它限制类容器</h4>
<p>除了上面介绍的这些常用的尺寸限制类容器外，还有一些其他的尺寸限制类容器，比如<code>AspectRatio</code>，它可以指定子组件的长宽比、<code>LimitedBox</code> 用于指定最大宽高、<code>FractionallySizedBox</code> 可以根据父容器宽高的百分比来设置子组件宽高等。</p>
<h3 id="装饰容器">装饰容器</h3>
<h4 id="decoratedbox">DecoratedBox</h4>
<p><code>DecoratedBox</code>可以在其子组件绘制前(或后)绘制一些装饰（Decoration），如背景、边框、渐变等。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> DecoratedBox(&#123;</span><br><span class="line">  Decoration decoration,</span><br><span class="line">  DecorationPosition position = DecorationPosition.background,</span><br><span class="line">  Widget child</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>decoration</code>：代表将要绘制的装饰，它的类型为<code>Decoration</code>。<code>Decoration</code>是一个抽象类，它定义了一个接口 <code>createBoxPainter()</code>，子类的主要职责是需要通过实现它来创建一个画笔，该画笔用于绘制装饰。</p>
</li>
<li>
<p><code>position</code>：此属性决定在哪里绘制</p>
<p><code>Decoration</code>，它接收<code>DecorationPosition</code>的枚举类型，该枚举类有两个值：</p>
<ul>
<li><code>background</code>：在子组件之后绘制，即背景装饰。</li>
<li><code>foreground</code>：在子组件之上绘制，即前景。</li>
</ul>
</li>
</ul>
<h5 id="boxdecoration">BoxDecoration</h5>
<p>我们通常会直接使用<code>BoxDecoration</code>类，它是一个Decoration的子类，实现了常用的装饰元素的绘制。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BoxDecoration(&#123;</span><br><span class="line">  Color color, <span class="comment">//颜色</span></span><br><span class="line">  DecorationImage image,<span class="comment">//图片</span></span><br><span class="line">  BoxBorder border, <span class="comment">//边框</span></span><br><span class="line">  BorderRadiusGeometry borderRadius, <span class="comment">//圆角</span></span><br><span class="line">  <span class="built_in">List</span>&lt;BoxShadow&gt; boxShadow, <span class="comment">//阴影,可以指定多个</span></span><br><span class="line">  Gradient gradient, <span class="comment">//渐变</span></span><br><span class="line">  BlendMode backgroundBlendMode, <span class="comment">//背景混合模式</span></span><br><span class="line">  BoxShape shape = BoxShape.rectangle, <span class="comment">//形状</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> DecoratedBox(</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">      gradient: LinearGradient(colors:[Colors.red,Colors.orange[<span class="number">700</span>]]), <span class="comment">//背景渐变</span></span><br><span class="line">      borderRadius: BorderRadius.circular(<span class="number">3.0</span>), <span class="comment">//3像素圆角</span></span><br><span class="line">      boxShadow: [ <span class="comment">//阴影</span></span><br><span class="line">        BoxShadow(</span><br><span class="line">            color:Colors.black54,</span><br><span class="line">            offset: Offset(<span class="number">2.0</span>,<span class="number">2.0</span>),</span><br><span class="line">            blurRadius: <span class="number">4.0</span></span><br><span class="line">        )</span><br><span class="line">      ]</span><br><span class="line">    ),</span><br><span class="line">  child: Padding(padding: EdgeInsets.symmetric(horizontal: <span class="number">80.0</span>, vertical: <span class="number">18.0</span>),</span><br><span class="line">    child: Text(<span class="string">"Login"</span>, style: TextStyle(color: Colors.white),),</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="变换transform">变换Transform</h3>
<p><code>Transform</code>可以在其子组件绘制时对其应用一些矩阵变换来实现一些特效</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  color: Colors.black,</span><br><span class="line">  child: <span class="keyword">new</span> Transform(</span><br><span class="line">    alignment: Alignment.topRight, <span class="comment">//相对于坐标系原点的对齐方式</span></span><br><span class="line">    transform: <span class="keyword">new</span> Matrix4.skewY(<span class="number">0.3</span>), <span class="comment">//沿Y轴倾斜0.3弧度</span></span><br><span class="line">    child: <span class="keyword">new</span> Container(</span><br><span class="line">      padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">      color: Colors.deepOrange,</span><br><span class="line">      child: <span class="keyword">const</span> Text(<span class="string">'Apartment for rent!'</span>),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="平移">平移</h4>
<p><code>Transform.translate</code>接收一个<code>offset</code>参数，可以在绘制时沿<code>x</code>、<code>y</code>轴对子组件平移指定的距离。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DecoratedBox(</span><br><span class="line">  decoration:BoxDecoration(color: Colors.red),</span><br><span class="line">  <span class="comment">//默认原点为左上角，左移20像素，向上平移5像素  </span></span><br><span class="line">  child: Transform.translate(</span><br><span class="line">    offset: Offset(<span class="number">-20.0</span>, <span class="number">-5.0</span>),</span><br><span class="line">    child: Text(<span class="string">"Hello world"</span>),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>效果是文本向左上有一些移动，背景在原地</p>
<h4 id="旋转">旋转</h4>
<p><code>Transform.rotate</code>可以对子组件进行旋转变换</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DecoratedBox(</span><br><span class="line">  decoration:BoxDecoration(color: Colors.red),</span><br><span class="line">  child: Transform.rotate(</span><br><span class="line">    <span class="comment">//旋转90度</span></span><br><span class="line">    angle:math.pi/<span class="number">2</span> ,</span><br><span class="line">    child: Text(<span class="string">"Hello world"</span>),</span><br><span class="line">  ),</span><br><span class="line">)；</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span> <span class="keyword">as</span> math;</span><br></pre></td></tr></table></figure>
<h4 id="缩放">缩放</h4>
<p><code>Transform.scale</code>可以对子组件进行缩小或放大，如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DecoratedBox(</span><br><span class="line">  decoration:BoxDecoration(color: Colors.red),</span><br><span class="line">  child: Transform.scale(</span><br><span class="line">      scale: <span class="number">1.5</span>, <span class="comment">//放大到1.5倍</span></span><br><span class="line">      child: Text(<span class="string">"Hello world"</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><code>Transform</code>的变换是应用在绘制阶段，而并不是应用在布局(layout)阶段，所以无论对子组件应用何种变化，其占用空间的大小和在屏幕上的位置都是固定不变的，因为这些是在布局阶段就确定的。因此，变换之后本来不会重合的组件也有可能会叠在一起。</p>
<h4 id="rotatedbox">RotatedBox</h4>
<p><code>RotatedBox</code>和<code>Transform.rotate</code>功能相似，它们都可以对子组件进行旋转变换，但是有一点不同：<code>RotatedBox</code>的变换是在layout阶段，会影响在子组件的位置和大小。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">  mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    DecoratedBox(</span><br><span class="line">      decoration: BoxDecoration(color: Colors.red),</span><br><span class="line">      <span class="comment">//将Transform.rotate换成RotatedBox  </span></span><br><span class="line">      child: RotatedBox(</span><br><span class="line">        quarterTurns: <span class="number">1</span>, <span class="comment">//旋转90度(1/4圈)</span></span><br><span class="line">        child: Text(<span class="string">"Hello world"</span>),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    Text(<span class="string">"你好"</span>, style: TextStyle(color: Colors.green, fontSize: <span class="number">18.0</span>),)</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h3 id="container">Container</h3>
<p><code>Container</code>是一个组合类容器，它本身不对应具体的<code>RenderObject</code>，它是<code>DecoratedBox</code>、<code>ConstrainedBox、Transform</code>、<code>Padding</code>、<code>Align</code>等组件组合的一个多功能容器，所以我们只需通过一个<code>Container</code>组件可以实现同时需要装饰、变换、限制的场景。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Container(&#123;</span><br><span class="line">  <span class="keyword">this</span>.alignment,</span><br><span class="line">  <span class="keyword">this</span>.padding, <span class="comment">//容器内补白，属于decoration的装饰范围</span></span><br><span class="line">  Color color, <span class="comment">// 背景色</span></span><br><span class="line">  Decoration decoration, <span class="comment">// 背景装饰</span></span><br><span class="line">  Decoration foregroundDecoration, <span class="comment">//前景装饰</span></span><br><span class="line">  <span class="built_in">double</span> width,<span class="comment">//容器的宽度</span></span><br><span class="line">  <span class="built_in">double</span> height, <span class="comment">//容器的高度</span></span><br><span class="line">  BoxConstraints constraints, <span class="comment">//容器大小的限制条件</span></span><br><span class="line">  <span class="keyword">this</span>.margin,<span class="comment">//容器外补白，不属于decoration的装饰范围</span></span><br><span class="line">  <span class="keyword">this</span>.transform, <span class="comment">//变换</span></span><br><span class="line">  <span class="keyword">this</span>.child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>Container</code>的大多数属性在介绍其它容器时都已经介绍过了，不再赘述，但有两点需要说明：</p>
<ul>
<li>容器的大小可以通过<code>width</code>、<code>height</code>属性来指定，也可以通过<code>constraints</code>来指定；如果它们同时存在时，<code>width</code>、<code>height</code>优先。实际上Container内部会根据<code>width</code>、<code>height</code>来生成一个<code>constraints</code>。</li>
<li><code>color</code>和<code>decoration</code>是互斥的，如果同时设置它们则会报错！实际上，当指定<code>color</code>时，<code>Container</code>内会自动创建一个<code>decoration</code>。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  margin: EdgeInsets.only(top: <span class="number">50.0</span>, left: <span class="number">120.0</span>), <span class="comment">//容器外填充</span></span><br><span class="line">  constraints: BoxConstraints.tightFor(width: <span class="number">200.0</span>, height: <span class="number">150.0</span>), <span class="comment">//卡片大小</span></span><br><span class="line">  decoration: BoxDecoration(<span class="comment">//背景装饰</span></span><br><span class="line">      gradient: RadialGradient( <span class="comment">//背景径向渐变</span></span><br><span class="line">          colors: [Colors.red, Colors.orange],</span><br><span class="line">          center: Alignment.topLeft,</span><br><span class="line">          radius: <span class="number">.98</span></span><br><span class="line">      ),</span><br><span class="line">      boxShadow: [ <span class="comment">//卡片阴影</span></span><br><span class="line">        BoxShadow(</span><br><span class="line">            color: Colors.black54,</span><br><span class="line">            offset: Offset(<span class="number">2.0</span>, <span class="number">2.0</span>),</span><br><span class="line">            blurRadius: <span class="number">4.0</span></span><br><span class="line">        )</span><br><span class="line">      ]</span><br><span class="line">  ),</span><br><span class="line">  transform: Matrix4.rotationZ(<span class="number">.2</span>), <span class="comment">//卡片倾斜变换</span></span><br><span class="line">  alignment: Alignment.center, <span class="comment">//卡片内文字居中</span></span><br><span class="line">  child: Text( <span class="comment">//卡片文字</span></span><br><span class="line">    <span class="string">"5.20"</span>, style: TextStyle(color: Colors.white, fontSize: <span class="number">40.0</span>),</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="padding和margin">Padding和Margin</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  margin: EdgeInsets.all(<span class="number">20.0</span>), <span class="comment">//容器外补白</span></span><br><span class="line">  color: Colors.orange,</span><br><span class="line">  child: Text(<span class="string">"Hello world!"</span>),</span><br><span class="line">),</span><br><span class="line">Container(</span><br><span class="line">  padding: EdgeInsets.all(<span class="number">20.0</span>), <span class="comment">//容器内补白</span></span><br><span class="line">  color: Colors.orange,</span><br><span class="line">  child: Text(<span class="string">"Hello world!"</span>),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h3 id="scaffold-tabbar-底部导航">Scaffold、TabBar、底部导航</h3>
<h4 id="scaffold">Scaffold</h4>
<p>一个完整的路由页可能会包含导航栏、抽屉菜单(Drawer)以及底部Tab导航菜单等。如果每个路由页面都需要开发者自己手动去实现这些，这会是一件非常麻烦且无聊的事。幸运的是，Flutter Material组件库提供了一些现成的组件来减少我们的开发任务。<code>Scaffold</code>是一个路由页的骨架，我们使用它可以很容易地拼装出一个完整的页面。</p>
<table>
<thead>
<tr>
<th>AppBar</th>
<th>一个导航栏骨架</th>
</tr>
</thead>
<tbody>
<tr>
<td>MyDrawer</td>
<td>抽屉菜单</td>
</tr>
<tr>
<td>BottomNavigationBar</td>
<td>底部导航栏</td>
</tr>
<tr>
<td>FloatingActionButton</td>
<td>漂浮按钮</td>
</tr>
</tbody>
</table>
<h5 id="appbar">AppBar</h5>
<p><code>AppBar</code>是一个Material风格的导航栏，通过它可以设置导航栏标题、导航栏菜单、导航栏底部的Tab标题等。下面我们看看AppBar的定义：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">AppBar(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="keyword">this</span>.leading, <span class="comment">//导航栏最左侧Widget，常见为抽屉菜单按钮或返回按钮。</span></span><br><span class="line">  <span class="keyword">this</span>.automaticallyImplyLeading = <span class="keyword">true</span>, <span class="comment">//如果leading为null，是否自动实现默认的leading按钮</span></span><br><span class="line">  <span class="keyword">this</span>.title,<span class="comment">// 页面标题</span></span><br><span class="line">  <span class="keyword">this</span>.actions, <span class="comment">// 导航栏右侧菜单</span></span><br><span class="line">  <span class="keyword">this</span>.bottom, <span class="comment">// 导航栏底部菜单，通常为Tab按钮组</span></span><br><span class="line">  <span class="keyword">this</span>.elevation = <span class="number">4.0</span>, <span class="comment">// 导航栏阴影</span></span><br><span class="line">  <span class="keyword">this</span>.centerTitle, <span class="comment">//标题是否居中 </span></span><br><span class="line">  <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">  ...   <span class="comment">//其它属性见源码注释</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如果给<code>Scaffold</code>添加了抽屉菜单，默认情况下<code>Scaffold</code>会自动将<code>AppBar</code>的<code>leading</code>设置为菜单按钮（如上面截图所示），点击它便可打开抽屉菜单。如果我们想自定义菜单图标，可以手动来设置<code>leading</code>，如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Scaffold(</span><br><span class="line">  appBar: AppBar(</span><br><span class="line">    title: Text(<span class="string">"App Name"</span>),</span><br><span class="line">    leading: Builder(builder: (context) &#123;</span><br><span class="line">      <span class="keyword">return</span> IconButton(</span><br><span class="line">        icon: Icon(Icons.dashboard, color: Colors.white), <span class="comment">//自定义图标</span></span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          <span class="comment">// 打开抽屉菜单  </span></span><br><span class="line">          Scaffold.of(context).openDrawer(); </span><br><span class="line">        &#125;,</span><br><span class="line">      );</span><br><span class="line">    &#125;),</span><br><span class="line">    ...  </span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<h4 id="tabbar">TabBar</h4>
<p>Material组件库中提供了一个<code>TabBar</code>组件，它可以快速生成<code>Tab</code>菜单</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">TabController _tabController; <span class="comment">//需要定义一个Controller</span></span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">"新闻"</span>, <span class="string">"历史"</span>, <span class="string">"图片"</span>];</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">// 创建Controller  </span></span><br><span class="line">    _tabController = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        ... <span class="comment">//省略无关代码</span></span><br><span class="line">        bottom: TabBar(   <span class="comment">//生成Tab菜单</span></span><br><span class="line">          controller: _tabController,</span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab(text: e)).toList()</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      ... <span class="comment">//省略无关代码</span></span><br></pre></td></tr></table></figure>
<p><code>Tab</code>组件有三个可选参数，除了可以指定文字外，还可以指定Tab菜单图标，或者直接自定义组件样式。<code>Tab</code>组件定义如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Tab(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  <span class="keyword">this</span>.text, <span class="comment">// 菜单文本</span></span><br><span class="line">  <span class="keyword">this</span>.icon, <span class="comment">// 菜单图标</span></span><br><span class="line">  <span class="keyword">this</span>.child, <span class="comment">// 自定义组件样式</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="tabbarview">TabBarView</h5>
<p>通过<code>TabController</code>去监听Tab菜单的切换去切换Tab页</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_tabController.addListener(()&#123;  </span><br><span class="line">  <span class="keyword">switch</span>(_tabController.index)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: ...;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>: ... ;   </span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>TabBarView</code>组件，通过它不仅可以轻松的实现Tab页，而且可以非常容易的配合TabBar来实现同步切换和滑动状态同步</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Scaffold(</span><br><span class="line">  appBar: AppBar(</span><br><span class="line">    ... <span class="comment">//省略无关代码</span></span><br><span class="line">    bottom: TabBar(</span><br><span class="line">      controller: _tabController,</span><br><span class="line">      tabs: tabs.map((e) =&gt; Tab(text: e)).toList()),</span><br><span class="line">  ),</span><br><span class="line">  drawer: <span class="keyword">new</span> MyDrawer(),</span><br><span class="line">  body: TabBarView(</span><br><span class="line">    controller: _tabController,</span><br><span class="line">    children: tabs.map((e) &#123; <span class="comment">//创建3个Tab页</span></span><br><span class="line">      <span class="keyword">return</span> Container(</span><br><span class="line">        alignment: Alignment.center,</span><br><span class="line">        child: Text(e, textScaleFactor: <span class="number">5</span>),</span><br><span class="line">      );</span><br><span class="line">    &#125;).toList(),</span><br><span class="line">  ),</span><br><span class="line">  ... <span class="comment">// 省略无关代码  </span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="drawer">Drawer</h4>
<p><code>Scaffold</code>的<code>drawer</code>和<code>endDrawer</code>属性可以分别接受一个Widget来作为页面的左、右抽屉菜单</p>
<p>举例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDrawer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyDrawer(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Drawer(</span><br><span class="line">      child: MediaQuery.removePadding(</span><br><span class="line">        context: context,</span><br><span class="line">        <span class="comment">//移除抽屉菜单顶部默认留白</span></span><br><span class="line">        removeTop: <span class="keyword">true</span>,</span><br><span class="line">        child: Column(</span><br><span class="line">          crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Padding(</span><br><span class="line">              padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">38.0</span>),</span><br><span class="line">              child: Row(</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  Padding(</span><br><span class="line">                    padding: <span class="keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="number">16.0</span>),</span><br><span class="line">                    child: ClipOval(</span><br><span class="line">                      child: Image.asset(</span><br><span class="line">                        <span class="string">"imgs/avatar.png"</span>,</span><br><span class="line">                        width: <span class="number">80</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  Text(</span><br><span class="line">                    <span class="string">"Wendux"</span>,</span><br><span class="line">                    style: TextStyle(fontWeight: FontWeight.bold),</span><br><span class="line">                  )</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            Expanded(</span><br><span class="line">              child: ListView(</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  ListTile(</span><br><span class="line">                    leading: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">                    title: <span class="keyword">const</span> Text(<span class="string">'Add account'</span>),</span><br><span class="line">                  ),</span><br><span class="line">                  ListTile(</span><br><span class="line">                    leading: <span class="keyword">const</span> Icon(Icons.settings),</span><br><span class="line">                    title: <span class="keyword">const</span> Text(<span class="string">'Manage accounts'</span>),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="floatingactionbutton">FloatingActionButton</h4>
<p><code>FloatingActionButton</code>是Material设计规范中的一种特殊Button，通常悬浮在页面的某一个位置作为某种常用动作的快捷入口，我们可以通过<code>Scaffold</code>的<code>floatingActionButton</code>属性来设置一个<code>FloatingActionButton</code>，同时通过<code>floatingActionButtonLocation</code>属性来指定其在页面中悬浮的位置。</p>
<h4 id="底部tab导航栏">底部Tab导航栏</h4>
<p>我们可以通过<code>Scaffold</code>的<code>bottomNavigationBar</code>属性来设置底部导航，过Material组件库提供的<code>BottomNavigationBar</code>和<code>BottomNavigationBarItem</code>两种组件来实现Material风格的底部导航栏。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">bottomNavigationBar: BottomAppBar(</span><br><span class="line">  color: Colors.white,</span><br><span class="line">  shape: CircularNotchedRectangle(), <span class="comment">// 底部导航栏打一个圆形的洞</span></span><br><span class="line">  child: Row(</span><br><span class="line">    children: [</span><br><span class="line">      IconButton(icon: Icon(Icons.home)),</span><br><span class="line">      SizedBox(), <span class="comment">//中间位置空出</span></span><br><span class="line">      IconButton(icon: Icon(Icons.business)),</span><br><span class="line">    ],</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.spaceAround, <span class="comment">//均分底部导航栏横向空间</span></span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>上面代码中没有控制打洞位置的属性，实际上，打洞的位置取决于<code>FloatingActionButton</code>的位置，上面<code>FloatingActionButton</code>的位置为：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,</span><br></pre></td></tr></table></figure>
<p><code>BottomAppBar</code>的<code>shape</code>属性决定洞的外形，<code>CircularNotchedRectangle</code>实现了一个圆形的外形，我们也可以自定义外形</p>
<h3 id="剪裁clip">剪裁（Clip）</h3>
<p>Flutter中提供了一些剪裁函数，用于对组件进行剪裁。</p>
<table>
<thead>
<tr>
<th>剪裁Widget</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>ClipOval</td>
<td>子组件为正方形时剪裁为内贴圆形，为矩形时，剪裁为内贴椭圆</td>
</tr>
<tr>
<td>ClipRRect</td>
<td>将子组件剪裁为圆角矩形</td>
</tr>
<tr>
<td>ClipRect</td>
<td>剪裁子组件到实际占用的矩形大小（溢出部分剪裁）</td>
</tr>
</tbody>
</table>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ClipRect(<span class="comment">//将溢出部分剪裁</span></span><br><span class="line">                child: Align(</span><br><span class="line">                  alignment: Alignment.topLeft,</span><br><span class="line">                  widthFactor: <span class="number">.5</span>,<span class="comment">//宽度设为原来宽度一半</span></span><br><span class="line">                  child: avatar,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Widget avatar = Image.asset(<span class="string">"imgs/avatar.png"</span>, width: <span class="number">60.0</span>);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">ClipOval(child: avatar), <span class="comment">//剪裁为圆形</span></span><br><span class="line">ClipRRect( <span class="comment">//剪裁为圆角矩形</span></span><br><span class="line">	borderRadius: BorderRadius.circular(<span class="number">5.0</span>),</span><br><span class="line">	child: avatar,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h4 id="customclipper">CustomClipper</h4>
<p>我们可以使用<code>CustomClipper</code>来自定义剪裁区域</p>
<p>首先，自定义一个<code>CustomClipper</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClipper</span> <span class="keyword">extends</span> <span class="title">CustomClipper</span>&lt;<span class="title">Rect</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Rect getClip(Size size) =&gt; Rect.fromLTWH(<span class="number">10.0</span>, <span class="number">15.0</span>, <span class="number">40.0</span>, <span class="number">30.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> shouldReclip(CustomClipper&lt;Rect&gt; oldClipper) =&gt; <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>getClip()</code>是用于获取剪裁区域的接口，由于图片大小是60×60，我们返回剪裁区域为<code>Rect.fromLTWH(10.0, 15.0, 40.0, 30.0)</code>，即图片中部40×30像素的范围。</li>
<li><code>shouldReclip()</code> 接口决定是否重新剪裁。如果在应用中，剪裁区域始终不会发生变化时应该返回<code>false</code>，这样就不会触发重新剪裁，避免不必要的性能开销。如果剪裁区域会发生变化（比如在对剪裁区域执行一个动画），那么变化后应该返回<code>true</code>来重新执行剪裁。</li>
</ul>
<p>然后，我们通过<code>ClipRect</code>来执行剪裁，为了看清图片实际所占用的位置，我们设置一个红色背景：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DecoratedBox(</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">    color: Colors.red</span><br><span class="line">  ),</span><br><span class="line">  child: ClipRect(</span><br><span class="line">      clipper: MyClipper(), <span class="comment">//使用自定义的clipper</span></span><br><span class="line">      child: avatar</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>可以看到我们的剪裁成功了，但是图片所占用的空间大小仍然是60×60（红色区域），这是因为剪裁是在layout完成后的绘制阶段进行的，所以不会影响组件的大小，这和<code>Transform</code>原理是相似的。</p>
<h3 id="card">Card</h3>
<p>Card只有一个child，可以放置任何widget，在 Flutter 中，<code>Card</code> 有轻微的圆角和阴影来使它具有 3D 效果。改变 <code>Card</code> 的 <code>elevation</code> 属性可以控制阴影效果。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body: Card(</span><br><span class="line">  child: Text(<span class="string">"dsadsaadsa"</span>),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>
<h2 id="可滚动组件">可滚动组件</h2>
<p>滚动组件都直接或间接包含一个<code>Scrollable</code>组件，因此它们包括一些共同的属性：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Scrollable(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">this</span>.axisDirection = AxisDirection.down,</span><br><span class="line">  <span class="keyword">this</span>.controller,</span><br><span class="line">  <span class="keyword">this</span>.physics,</span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.viewportBuilder, <span class="comment">//后面介绍</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>axisDirection</code>滚动方向。</p>
</li>
<li>
<p><code>physics</code>：此属性接受一个</p>
<p>ScrollPhysics：类型的对象，它决定可滚动组件如何响应用户操作，比如用户滑动完抬起手指后，继续执行动画；或者滑动到边界时，如何显示。默认情况下，Flutter会根据具体平台分别使用不同的</p>
<p>ScrollPhysics对象，应用不同的显示效果，如当滑动到边界时，继续拖动的话，在iOS上会出现弹性效果，而在Android上会出现微光效果。如果你想在所有平台下使用同一种效果，可以显式指定一个固定的</p>
<p>ScrollPhysics：lutter SDK中包含了两个ScrollPhysics的子类，他们可以直接使用：</p>
<ul>
<li><code>ClampingScrollPhysics</code>：Android下微光效果。</li>
<li><code>BouncingScrollPhysics</code>：iOS下弹性效果。</li>
</ul>
</li>
<li>
<p><code>controller</code>：此属性接受一个<code>ScrollController</code>对象。<code>ScrollController</code>的主要作用是控制滚动位置和监听滚动事件。默认情况下，Widget树中会有一个默认的<code>PrimaryScrollController</code>，如果子树中的可滚动组件没有显式的指定<code>controller</code>，并且<code>primary</code>属性值为<code>true</code>时（默认就为<code>true</code>），可滚动组件会使用这个默认的<code>PrimaryScrollController</code>。这种机制带来的好处是父组件可以控制子树中可滚动组件的滚动行为，例如，<code>Scaffold</code>正是使用这种机制在iOS中实现了点击导航栏回到顶部的功能。</p>
</li>
</ul>
<h3 id="scrollbar">Scrollbar</h3>
<p><code>Scrollbar</code>是一个Material风格的滚动指示器（滚动条），如果要给可滚动组件添加滚动条，只需将<code>Scrollbar</code>作为可滚动组件的任意一个父级组件即可</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Scrollbar(</span><br><span class="line">  child: SingleChildScrollView(</span><br><span class="line">    ...</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="viewport">ViewPort</h3>
<p>ViewPort是指一个Widget的实际显示区域。</p>
<h3 id="基于sliver的延迟构建">基于Sliver的延迟构建</h3>
<p>通常可滚动组件的子组件可能会非常多、占用的总高度也会非常大；如果要一次性将子组件全部构建出将会非常昂贵！为此，Flutter中提出一个Sliver（中文为“薄片”的意思）概念，如果一个可滚动组件支持Sliver模型，那么该滚动可以将子组件分成好多个“薄片”（Sliver），只有当Sliver出现在视口中时才会去构建它，这种模型也称为“基于Sliver的延迟构建模型”。可滚动组件中有很多都支持基于Sliver的延迟构建模型，如<code>ListView</code>、<code>GridView</code>，但是也有不支持该模型的，如<code>SingleChildScrollView</code>。</p>
<h3 id="singlechildscrollview">SingleChildScrollView</h3>
<p><code>SingleChildScrollView</code>类似于Android中的<code>ScrollView</code>，它只能接收一个子组件</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SingleChildScrollView(&#123;</span><br><span class="line">  <span class="keyword">this</span>.scrollDirection = Axis.vertical, <span class="comment">//滚动方向，默认是垂直方向</span></span><br><span class="line">  <span class="keyword">this</span>.reverse = <span class="keyword">false</span>, </span><br><span class="line">  <span class="keyword">this</span>.padding, </span><br><span class="line">  <span class="built_in">bool</span> primary, </span><br><span class="line">  <span class="keyword">this</span>.physics, </span><br><span class="line">  <span class="keyword">this</span>.controller,</span><br><span class="line">  <span class="keyword">this</span>.child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>除了上一节我们介绍过的可滚动组件的通用属性外，我们重点看一下<code>reverse</code>和<code>primary</code>两个属性：</p>
<ul>
<li><code>reverse</code>：该属性API文档解释是：是否按照阅读方向相反的方向滑动，如：<code>scrollDirection</code>值为<code>Axis.horizontal</code>，如果阅读方向是从左到右(取决于语言环境，阿拉伯语就是从右到左)。<code>reverse</code>为<code>true</code>时，那么滑动方向就是从右往左。其实此属性本质上是决定可滚动组件的初始滚动位置是在“头”还是“尾”，取<code>false</code>时，初始滚动位置在“头”，反之则在“尾”，读者可以自己试验。</li>
<li><code>primary</code>：指是否使用widget树中默认的<code>PrimaryScrollController</code>；当滑动方向为垂直方向（<code>scrollDirection</code>值为<code>Axis.vertical</code>）并且没有指定<code>controller</code>时，<code>primary</code>默认为<code>true</code>.</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="built_in">String</span> str = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;</span><br><span class="line">    <span class="keyword">return</span> Scrollbar( <span class="comment">// 显示进度条</span></span><br><span class="line">      child: SingleChildScrollView(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Column( </span><br><span class="line">            <span class="comment">//动态创建一个List&lt;Widget&gt;  </span></span><br><span class="line">            children: str.split(<span class="string">""</span>) </span><br><span class="line">                <span class="comment">//每一个字母都用一个Text显示,字体为原来的两倍</span></span><br><span class="line">                .map((c) =&gt; Text(c, textScaleFactor: <span class="number">2.0</span>,)) </span><br><span class="line">                .toList(),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="listview">ListView</h3>
<p><code>ListView</code>是最常用的可滚动组件之一，它可以沿一个方向线性排布所有子组件，并且它也支持基于Sliver的延迟构建模型。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ListView(&#123;</span><br><span class="line">  ...  </span><br><span class="line">  <span class="comment">//可滚动widget公共参数</span></span><br><span class="line">  Axis scrollDirection = Axis.vertical,</span><br><span class="line">  <span class="built_in">bool</span> reverse = <span class="keyword">false</span>,</span><br><span class="line">  ScrollController controller,</span><br><span class="line">  <span class="built_in">bool</span> primary,</span><br><span class="line">  ScrollPhysics physics,</span><br><span class="line">  EdgeInsetsGeometry padding,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ListView各个构造函数的共同参数  </span></span><br><span class="line">  <span class="built_in">double</span> itemExtent,</span><br><span class="line">  <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>,</span><br><span class="line">  <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">double</span> cacheExtent,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//子widget列表</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>上面参数分为两组：第一组是可滚动组件的公共参数，本章第一节中已经介绍过，不再赘述；第二组是<code>ListView</code>各个构造函数（<code>ListView</code>有多个构造函数）的共同参数，我们重点来看看这些参数，：</p>
<ul>
<li><code>itemExtent</code>：该参数如果不为<code>null</code>，则会强制<code>children</code>的“长度”为<code>itemExtent</code>的值；这里的“长度”是指滚动方向上子组件的长度，也就是说如果滚动方向是垂直方向，则<code>itemExtent</code>代表子组件的高度；如果滚动方向为水平方向，则<code>itemExtent</code>就代表子组件的宽度。在<code>ListView</code>中，指定<code>itemExtent</code>比让子组件自己决定自身长度会更高效，这是因为指定<code>itemExtent</code>后，滚动系统可以提前知道列表的长度，而无需每次构建子组件时都去再计算一下，尤其是在滚动位置频繁变化时（滚动系统需要频繁去计算列表高度）。</li>
<li><code>shrinkWrap</code>：该属性表示是否根据子组件的总长度来设置<code>ListView</code>的长度，默认值为<code>false</code> 。默认情况下，<code>ListView</code>的会在滚动方向尽可能多的占用空间。当<code>ListView</code>在一个无边界(滚动方向上)的容器中时，<code>shrinkWrap</code>必须为<code>true</code>。</li>
<li><code>addAutomaticKeepAlives</code>：该属性表示是否将列表项（子组件）包裹在<code>AutomaticKeepAlive</code> 组件中；典型地，在一个懒加载列表中，如果将列表项包裹在<code>AutomaticKeepAlive</code>中，在该列表项滑出视口时它也不会被GC（垃圾回收），它会使用<code>KeepAliveNotification</code>来保存其状态。如果列表项自己维护其<code>KeepAlive</code>状态，那么此参数必须置为<code>false</code>。</li>
<li><code>addRepaintBoundaries</code>：该属性表示是否将列表项（子组件）包裹在<code>RepaintBoundary</code>组件中。当可滚动组件滚动时，将列表项包裹在<code>RepaintBoundary</code>中可以避免列表项重绘，但是当列表项重绘的开销非常小（如一个颜色块，或者一个较短的文本）时，不添加<code>RepaintBoundary</code>反而会更高效。和<code>addAutomaticKeepAlive</code>一样，如果列表项自己维护其<code>KeepAlive</code>状态，那么此参数必须置为<code>false</code>。</li>
</ul>
<h4 id="默认构造函数">默认构造函数</h4>
<p>默认构造函数有一个<code>children</code>参数，它接受一个Widget列表（List）。这种方式适合只有少量的子组件的情况，因为这种方式需要将所有<code>children</code>都提前创建好。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ListView(</span><br><span class="line">  shrinkWrap: <span class="keyword">true</span>, </span><br><span class="line">  padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    <span class="keyword">const</span> Text(<span class="string">'I\'m dedicating every day to you'</span>),</span><br><span class="line">    <span class="keyword">const</span> Text(<span class="string">'Domestic life was never quite my style'</span>),</span><br><span class="line">    <span class="keyword">const</span> Text(<span class="string">'When you smile, you knock me out, I fall apart'</span>),</span><br><span class="line">    <span class="keyword">const</span> Text(<span class="string">'And I thought I was so smart'</span>),</span><br><span class="line">  ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="listviewbuilder">ListView.builder</h4>
<p><code>ListView.builder</code>适合列表项比较多（或者无限）的情况，因为只有当子组件真正显示的时候才会被创建，也就说通过该构造函数创建的<code>ListView</code>是支持基于Sliver的懒加载模型的。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(&#123;</span><br><span class="line">  <span class="comment">// ListView公共参数已省略  </span></span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@required</span> IndexedWidgetBuilder itemBuilder,</span><br><span class="line">  <span class="built_in">int</span> itemCount,</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>itemBuilder</code>：它是列表项的构建器，类型为<code>IndexedWidgetBuilder</code>，返回值为一个widget。当列表滚动到具体的<code>index</code>位置时，会调用该构建器构建列表项。</li>
<li><code>itemCount</code>：列表项的数量，如果为<code>null</code>，则为无限列表。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">    itemCount: <span class="number">100</span>,</span><br><span class="line">    itemExtent: <span class="number">50.0</span>, <span class="comment">//强制高度为50.0</span></span><br><span class="line">    itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">      <span class="keyword">return</span> ListTile(title: Text(<span class="string">"$index"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="listviewseparated">ListView.separated</h4>
<p><code>ListView.separated</code>可以在生成的列表项之间添加一个分割组件，它比<code>ListView.builder</code>多了一个<code>separatorBuilder</code>参数，该参数是一个分割组件生成器。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//下划线widget预定义以供复用。  </span></span><br><span class="line">    Widget divider1=Divider(color: Colors.blue,);</span><br><span class="line">    Widget divider2=Divider(color: Colors.green);</span><br><span class="line">    <span class="keyword">return</span> ListView.separated(</span><br><span class="line">        itemCount: <span class="number">100</span>,</span><br><span class="line">        <span class="comment">//列表项构造器</span></span><br><span class="line">        itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">          <span class="keyword">return</span> ListTile(title: Text(<span class="string">"$index"</span>));</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//分割器构造器</span></span><br><span class="line">        separatorBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">          <span class="keyword">return</span> index%<span class="number">2</span>==<span class="number">0</span>?divider1:divider2;</span><br><span class="line">        &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加固定列表头">添加固定列表头</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(children: &lt;Widget&gt;[</span><br><span class="line">    ListTile(title:Text(<span class="string">"商品列表"</span>)),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: ListView.builder(itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">        <span class="keyword">return</span> ListTile(title: Text(<span class="string">"$index"</span>));</span><br><span class="line">      &#125;),</span><br><span class="line">    ),</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="gridview">GridView</h3>
<p><code>GridView</code>可以构建一个二维网格列表</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GridView(&#123;</span><br><span class="line">  Axis scrollDirection = Axis.vertical,</span><br><span class="line">  <span class="built_in">bool</span> reverse = <span class="keyword">false</span>,</span><br><span class="line">  ScrollController controller,</span><br><span class="line">  <span class="built_in">bool</span> primary,</span><br><span class="line">  ScrollPhysics physics,</span><br><span class="line">  <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>,</span><br><span class="line">  EdgeInsetsGeometry padding,</span><br><span class="line">  <span class="meta">@required</span> SliverGridDelegate gridDelegate, <span class="comment">//控制子widget layout的委托</span></span><br><span class="line">  <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">  <span class="built_in">double</span> cacheExtent,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="slivergriddelegatewithfixedcrossaxiscount">SliverGridDelegateWithFixedCrossAxisCount</h4>
<p>该子类实现了一个横轴为固定数量子元素的layout算法，其构造函数为：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SliverGridDelegateWithFixedCrossAxisCount(&#123;</span><br><span class="line">  <span class="meta">@required</span> <span class="built_in">double</span> crossAxisCount, </span><br><span class="line">  <span class="built_in">double</span> mainAxisSpacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="built_in">double</span> crossAxisSpacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="built_in">double</span> childAspectRatio = <span class="number">1.0</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>crossAxisCount</code>：横轴子元素的数量。此属性值确定后子元素在横轴的长度就确定了，即ViewPort横轴长度除以<code>crossAxisCount</code>的商。</li>
<li><code>mainAxisSpacing</code>：主轴方向的间距。</li>
<li><code>crossAxisSpacing</code>：横轴方向子元素的间距。</li>
<li><code>childAspectRatio</code>：子元素在横轴长度和主轴长度的比例。由于<code>crossAxisCount</code>指定后，子元素横轴长度就确定了，然后通过此参数值就可以确定子元素在主轴的长度。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GridView(</span><br><span class="line">  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">      crossAxisCount: <span class="number">3</span>, <span class="comment">//横轴三个子widget</span></span><br><span class="line">      childAspectRatio: <span class="number">1.0</span> <span class="comment">//宽高比为1时，子widget</span></span><br><span class="line">  ),</span><br><span class="line">  children:&lt;Widget&gt;[</span><br><span class="line">    Icon(Icons.ac_unit),</span><br><span class="line">    Icon(Icons.airport_shuttle),</span><br><span class="line">    Icon(Icons.all_inclusive),</span><br><span class="line">    Icon(Icons.beach_access),</span><br><span class="line">    Icon(Icons.cake),</span><br><span class="line">    Icon(Icons.free_breakfast)</span><br><span class="line">  ]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="gridviewcount">GridView.count</h4>
<p><code>GridView.count</code>构造函数内部使用了<code>SliverGridDelegateWithFixedCrossAxisCount</code>，我们通过它可以快速的创建横轴固定数量子元素的`GridView</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GridView.count( </span><br><span class="line">  crossAxisCount: <span class="number">3</span>,</span><br><span class="line">  childAspectRatio: <span class="number">1.0</span>,</span><br><span class="line">  children: _buildGridTileList(<span class="number">30</span>));</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;Container&gt; _buildGridTileList(<span class="built_in">int</span> count) =&gt; <span class="built_in">List</span>.generate(</span><br><span class="line">    count, (i) =&gt; Container(child: Text(<span class="string">'第$i'</span>)));</span><br></pre></td></tr></table></figure>
<h4 id="slivergriddelegatewithmaxcrossaxisextent">SliverGridDelegateWithMaxCrossAxisExtent</h4>
<p>该子类实现了一个横轴子元素为固定最大长度的layout算法</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SliverGridDelegateWithMaxCrossAxisExtent(&#123;</span><br><span class="line">  <span class="built_in">double</span> maxCrossAxisExtent,</span><br><span class="line">  <span class="built_in">double</span> mainAxisSpacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="built_in">double</span> crossAxisSpacing = <span class="number">0.0</span>,</span><br><span class="line">  <span class="built_in">double</span> childAspectRatio = <span class="number">1.0</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>maxCrossAxisExtent</code>为子元素在横轴上的最大长度，之所以是“最大”长度，是<strong>因为横轴方向每个子元素的长度仍然是等分的</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GridView(</span><br><span class="line">  padding: EdgeInsets.zero,</span><br><span class="line">  gridDelegate: SliverGridDelegateWithMaxCrossAxisExtent(</span><br><span class="line">      maxCrossAxisExtent: <span class="number">120.0</span>,</span><br><span class="line">      childAspectRatio: <span class="number">2.0</span> <span class="comment">//宽高比为2</span></span><br><span class="line">  ),</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Icon(Icons.ac_unit),</span><br><span class="line">    Icon(Icons.airport_shuttle),</span><br><span class="line">    Icon(Icons.all_inclusive),</span><br><span class="line">    Icon(Icons.beach_access),</span><br><span class="line">    Icon(Icons.cake),</span><br><span class="line">    Icon(Icons.free_breakfast),</span><br><span class="line">  ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="gridviewextent">GridView.extent</h4>
<p>GridView.extent构造函数内部使用了SliverGridDelegateWithMaxCrossAxisExtent，我们通过它可以快速的创建纵轴子元素为固定最大长度的的GridView</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GridView.extent(</span><br><span class="line">   maxCrossAxisExtent: <span class="number">120.0</span>,</span><br><span class="line">   childAspectRatio: <span class="number">2.0</span>,</span><br><span class="line">   children: &lt;Widget&gt;[</span><br><span class="line">     Icon(Icons.ac_unit),</span><br><span class="line">     Icon(Icons.airport_shuttle),</span><br><span class="line">     Icon(Icons.all_inclusive),</span><br><span class="line">     Icon(Icons.beach_access),</span><br><span class="line">     Icon(Icons.cake),</span><br><span class="line">     Icon(Icons.free_breakfast),</span><br><span class="line">   ],</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
<h4 id="gridviewbuilder">GridView.builder</h4>
<p>可以通过<code>GridView.builder</code>来动态创建子widget</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GridView.builder(</span><br><span class="line"> ...</span><br><span class="line"> <span class="meta">@required</span> SliverGridDelegate gridDelegate, </span><br><span class="line"> <span class="meta">@required</span> IndexedWidgetBuilder itemBuilder,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>其中<code>itemBuilder</code>为子widget构建器。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">   <span class="keyword">return</span> GridView.builder(</span><br><span class="line">       gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">           crossAxisCount: <span class="number">3</span>, <span class="comment">//每行三列</span></span><br><span class="line">           childAspectRatio: <span class="number">1.0</span> <span class="comment">//显示区域宽高相等</span></span><br><span class="line">       ),</span><br><span class="line">       itemCount: _icons.length,</span><br><span class="line">       itemBuilder: (context, index) &#123;</span><br><span class="line">         <span class="comment">//如果显示到最后一个并且Icon总数小于200时继续获取数据</span></span><br><span class="line">         <span class="keyword">if</span> (index == _icons.length - <span class="number">1</span> &amp;&amp; _icons.length &lt; <span class="number">200</span>) &#123;</span><br><span class="line">           _retrieveIcons();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> Icon(_icons[index]);</span><br><span class="line">       &#125;</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//模拟异步获取数据</span></span><br><span class="line"> <span class="keyword">void</span> _retrieveIcons() &#123;</span><br><span class="line">   Future.delayed(<span class="built_in">Duration</span>(milliseconds: <span class="number">200</span>)).then((e) &#123;</span><br><span class="line">     setState(() &#123;</span><br><span class="line">       _icons.addAll([</span><br><span class="line">         Icons.ac_unit,</span><br><span class="line">         Icons.airport_shuttle,</span><br><span class="line">         Icons.all_inclusive,</span><br><span class="line">         Icons.beach_access, Icons.cake,</span><br><span class="line">         Icons.free_breakfast</span><br><span class="line">       ]);</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>List和GridView不能放在Row和Colum中，因为无法测出尺寸，可以写死尺寸或者套一个Expanded。</strong></p>
<p><strong>Pub上有一个包“flutter_staggered_grid_view” ，它实现了一个交错GridView的布局模型，可以很轻松的实现item宽高不相等的GridView。</strong></p>
<h3 id="customscrollview">CustomScrollView</h3>
<p><code>CustomScrollView</code>是可以使用Sliver来自定义滚动模型（效果）的组件，比如顶部需要一个<code>GridView</code>，底部需要一个<code>ListView</code>，而要求整个页面的滑动效果是统一的。</p>
<p>为了能让可滚动组件能和<code>CustomScrollView</code>配合使用，Flutter提供了一些可滚动组件的Sliver版，如SliverList、SliverGrid等</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomScrollViewTestRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//因为本路由没有使用Scaffold，为了让子级Widget(如Text)使用</span></span><br><span class="line">    <span class="comment">//Material Design 默认的样式风格,我们使用Material作为本路由的根。</span></span><br><span class="line">    <span class="keyword">return</span> Material(</span><br><span class="line">      child: CustomScrollView(</span><br><span class="line">        slivers: &lt;Widget&gt;[</span><br><span class="line">          <span class="comment">//AppBar，包含一个导航栏</span></span><br><span class="line">          SliverAppBar(</span><br><span class="line">            pinned: <span class="keyword">true</span>,</span><br><span class="line">            expandedHeight: <span class="number">250.0</span>,</span><br><span class="line">            flexibleSpace: FlexibleSpaceBar(</span><br><span class="line">              title: <span class="keyword">const</span> Text(<span class="string">'Demo'</span>),</span><br><span class="line">              background: Image.asset(</span><br><span class="line">                <span class="string">"./images/avatar.png"</span>, fit: BoxFit.cover,),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line"></span><br><span class="line">          SliverPadding(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">            sliver: <span class="keyword">new</span> SliverGrid( <span class="comment">//Grid</span></span><br><span class="line">              gridDelegate: <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">                crossAxisCount: <span class="number">2</span>, <span class="comment">//Grid按两列显示</span></span><br><span class="line">                mainAxisSpacing: <span class="number">10.0</span>,</span><br><span class="line">                crossAxisSpacing: <span class="number">10.0</span>,</span><br><span class="line">                childAspectRatio: <span class="number">4.0</span>,</span><br><span class="line">              ),</span><br><span class="line">              delegate: <span class="keyword">new</span> SliverChildBuilderDelegate(</span><br><span class="line">                    (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                  <span class="comment">//创建子widget      </span></span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">new</span> Container(</span><br><span class="line">                    alignment: Alignment.center,</span><br><span class="line">                    color: Colors.cyan[<span class="number">100</span> * (index % <span class="number">9</span>)],</span><br><span class="line">                    child: <span class="keyword">new</span> Text(<span class="string">'grid item $index'</span>),</span><br><span class="line">                  );</span><br><span class="line">                &#125;,</span><br><span class="line">                childCount: <span class="number">20</span>,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          <span class="comment">//List</span></span><br><span class="line">          <span class="keyword">new</span> SliverFixedExtentList(</span><br><span class="line">            itemExtent: <span class="number">50.0</span>,</span><br><span class="line">            delegate: <span class="keyword">new</span> SliverChildBuilderDelegate(</span><br><span class="line">                    (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                  <span class="comment">//创建列表项      </span></span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">new</span> Container(</span><br><span class="line">                    alignment: Alignment.center,</span><br><span class="line">                    color: Colors.lightBlue[<span class="number">100</span> * (index % <span class="number">9</span>)],</span><br><span class="line">                    child: <span class="keyword">new</span> Text(<span class="string">'list item $index'</span>),</span><br><span class="line">                  );</span><br><span class="line">                &#125;,</span><br><span class="line">                childCount: <span class="number">50</span> <span class="comment">//50个列表项</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="滚动监听及控制">滚动监听及控制</h3>
<p>可以用<code>ScrollController</code>来控制可滚动组件的滚动位置。</p>
<h4 id="scrollcontroller">ScrollController</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ScrollController(&#123;</span><br><span class="line">  <span class="built_in">double</span> initialScrollOffset = <span class="number">0.0</span>, <span class="comment">//初始滚动位置</span></span><br><span class="line">  <span class="keyword">this</span>.keepScrollOffset = <span class="keyword">true</span>,<span class="comment">//是否保存滚动位置</span></span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>常用的属性和方法：</p>
<ul>
<li><code>offset</code>：可滚动组件当前的滚动位置。</li>
<li><code>jumpTo(double offset)</code>、<code>animateTo(double offset,...)</code>：这两个方法用于跳转到指定的位置，它们不同之处在于，后者在跳转时会执行一个动画，而前者不会。</li>
</ul>
<h4 id="滚动监听">滚动监听</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">controller.addListener(()=&gt;<span class="built_in">print</span>(controller.offset))</span><br></pre></td></tr></table></figure>
<h4 id="滚动位置恢复">滚动位置恢复</h4>
<p><code>PageStorage</code>是一个用于保存页面(路由)相关数据的组件，子树中的Widget可以通过指定不同的<code>PageStorageKey</code>来存储各自的数据或状态。</p>
<p>每次滚动结束，可滚动组件都会将滚动位置<code>offset</code>存储到<code>PageStorage</code>中，当可滚动组件重新创建时再恢复。如果<code>ScrollController.keepScrollOffset</code>为<code>false</code>，则滚动位置将不会被存储，可滚动组件重新创建时会使用<code>ScrollController.initialScrollOffset</code>；<code>ScrollController.keepScrollOffset</code>为<code>true</code>时，可滚动组件在<strong>第一次</strong>创建时，会滚动到<code>initialScrollOffset</code>处，因为这时还没有存储过滚动位置。在接下来的滚动中就会存储、恢复滚动位置，而<code>initialScrollOffset</code>会被忽略。</p>
<p>当一个路由中包含多个可滚动组件时，如果你发现在进行一些跳转或切换操作后，滚动位置不能正确恢复，这时你可以通过显式指定<code>PageStorageKey</code>来分别跟踪不同的可滚动组件的位置，如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ListView(key: PageStorageKey(<span class="number">1</span>), ... );</span><br><span class="line">...</span><br><span class="line">ListView(key: PageStorageKey(<span class="number">2</span>), ... );</span><br></pre></td></tr></table></figure>
<h4 id="scrollposition">ScrollPosition</h4>
<p>ScrollPosition是用来保存可滚动组件的滚动位置的。一个<code>ScrollController</code>对象可以同时被多个可滚动组件使用，<code>ScrollController</code>会为每一个可滚动组件创建一个<code>ScrollPosition</code>对象，这些<code>ScrollPosition</code>保存在<code>ScrollController</code>的<code>positions</code>属性中（<code>List&lt;ScrollPosition&gt;</code>）。<code>ScrollPosition</code>是真正保存滑动位置信息的对象，<code>offset</code>只是一个便捷属性：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> <span class="keyword">get</span> offset =&gt; position.pixels;</span><br></pre></td></tr></table></figure>
<p>一个<code>ScrollController</code>虽然可以对应多个可滚动组件，但是有一些操作，如读取滚动位置<code>offset</code>，则需要一对一！但是我们仍然可以在一对多的情况下，通过其它方法读取滚动位置，举个例子，假设一个<code>ScrollController</code>同时被两个可滚动组件使用，那么我们可以通过如下方式分别读取他们的滚动位置：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">controller.positions.elementAt(<span class="number">0</span>).pixels</span><br><span class="line">controller.positions.elementAt(<span class="number">1</span>).pixels</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>我们可以通过<code>controller.positions.length</code>来确定<code>controller</code>被几个可滚动组件使用。</p>
<p><code>ScrollPosition</code>有两个常用方法：<code>animateTo()</code> 和 <code>jumpTo()</code>，它们是真正来控制跳转滚动位置的方法，<code>ScrollController</code>的这两个同名方法，内部最终都会调用<code>ScrollPosition</code>的。</p>
<h4 id="scrollcontroller控制原理">ScrollController控制原理</h4>
<p><code>ScrollController</code>的另外三个方法：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ScrollPosition createScrollPosition(</span><br><span class="line">    ScrollPhysics physics,</span><br><span class="line">    ScrollContext context,</span><br><span class="line">    ScrollPosition oldPosition);</span><br><span class="line"><span class="keyword">void</span> attach(ScrollPosition position) ;</span><br><span class="line"><span class="keyword">void</span> detach(ScrollPosition position) ;</span><br></pre></td></tr></table></figure>
<p>当<code>ScrollController</code>和可滚动组件关联时，可滚动组件首先会调用<code>ScrollController</code>的<code>createScrollPosition()</code>方法来创建一个<code>ScrollPosition</code>来存储滚动位置信息，接着，可滚动组件会调用<code>attach()</code>方法，将创建的<code>ScrollPosition</code>添加到<code>ScrollController</code>的<code>positions</code>属性中，这一步称为“注册位置”，只有注册后<code>animateTo()</code> 和 <code>jumpTo()</code>才可以被调用。</p>
<p>当可滚动组件销毁时，会调用<code>ScrollController</code>的<code>detach()</code>方法，将其<code>ScrollPosition</code>对象从<code>ScrollController</code>的<code>positions</code>属性中移除，这一步称为“注销位置”，注销后<code>animateTo()</code> 和 <code>jumpTo()</code> 将不能再被调用。</p>
<p>需要注意的是，<code>ScrollController</code>的<code>animateTo()</code> 和 <code>jumpTo()</code>内部会调用所有<code>ScrollPosition</code>的<code>animateTo()</code> 和 <code>jumpTo()</code>，以实现所有和该<code>ScrollController</code>关联的可滚动组件都滚动到指定的位置。</p>
<h4 id="滚动监听">滚动监听</h4>
<p>Flutter Widget树中子Widget可以通过发送通知（Notification）与父(包括祖先)Widget通信。父级组件可以通过<code>NotificationListener</code>组件来监听自己关注的通知。</p>
<p>可滚动组件在滚动时会发送<code>ScrollNotification</code>类型的通知，<code>ScrollBar</code>正是通过监听滚动通知来实现的。通过<code>NotificationListener</code>监听滚动事件和通过<code>ScrollController</code>有两个主要的不同：</p>
<ol>
<li>通过NotificationListener可以在从可滚动组件到widget树根之间任意位置都能监听。而<code>ScrollController</code>只能和具体的可滚动组件关联后才可以。</li>
<li>收到滚动事件后获得的信息不同；<code>NotificationListener</code>在收到滚动事件时，通知中会携带当前滚动位置和ViewPort的一些信息，而<code>ScrollController</code>只能获取当前滚动位置。</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scrollbar( <span class="comment">//进度条</span></span><br><span class="line">      <span class="comment">// 监听滚动通知</span></span><br><span class="line">      child: NotificationListener&lt;ScrollNotification&gt;(</span><br><span class="line">        onNotification: (ScrollNotification notification) &#123;</span><br><span class="line">          <span class="built_in">double</span> progress = notification.metrics.pixels /</span><br><span class="line">              notification.metrics.maxScrollExtent;</span><br><span class="line">          <span class="comment">//重新构建</span></span><br><span class="line">          setState(() &#123;</span><br><span class="line">            _progress = <span class="string">"<span class="subst">$&#123;(progress * <span class="number">100</span>).toInt()&#125;</span>%"</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">"BottomEdge: <span class="subst">$&#123;notification.metrics.extentAfter == <span class="number">0</span>&#125;</span>"</span>);</span><br><span class="line">          <span class="comment">//return true; //放开此行注释后，进度条将失效</span></span><br><span class="line">        &#125;,</span><br><span class="line">        child: Stack(</span><br><span class="line">          alignment: Alignment.center,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            ListView.builder(</span><br><span class="line">                itemCount: <span class="number">100</span>,</span><br><span class="line">                itemExtent: <span class="number">50.0</span>,</span><br><span class="line">                itemBuilder: (context, index) &#123;</span><br><span class="line">                  <span class="keyword">return</span> ListTile(title: Text(<span class="string">"$index"</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            ),</span><br><span class="line">            CircleAvatar(  <span class="comment">//显示进度百分比</span></span><br><span class="line">              radius: <span class="number">30.0</span>,</span><br><span class="line">              child: Text(_progress),</span><br><span class="line">              backgroundColor: Colors.black54,</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>在接收到滚动事件时，参数类型为<code>ScrollNotification</code>，它包括一个<code>metrics</code>属性，它的类型是<code>ScrollMetrics</code>，该属性包含当前ViewPort及滚动位置等信息：</p>
<ul>
<li><code>pixels</code>：当前滚动位置。</li>
<li><code>maxScrollExtent</code>：最大可滚动长度。</li>
<li><code>extentBefore</code>：滑出ViewPort顶部的长度；此示例中相当于顶部滑出屏幕上方的列表长度。</li>
<li><code>extentInside</code>：ViewPort内部长度；此示例中屏幕显示的列表部分的长度。</li>
<li><code>extentAfter</code>：列表中未滑入ViewPort部分的长度；此示例中列表底部未显示到屏幕范围部分的长度。</li>
<li><code>atEdge</code>：是否滑到了可滚动组件的边界（此示例中相当于列表顶或底部）。</li>
</ul>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/Flutter/Flutter入门：路由、包和资源/" data-toggle="tooltip" data-placement="top" title="Flutter入门：路由、包和资源">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/音视频/WebRtc/WebRtc连接过程/" data-toggle="tooltip" data-placement="top" title="WebRtc 建联过程">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#常用widgets"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">&#x5E38;&#x7528;widgets</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#文本及样式"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">&#x6587;&#x672C;&#x53CA;&#x6837;&#x5F0F;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#text"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">Text</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#textstyle"><span class="toc-nav-number">1.1.2.</span> <span class="toc-nav-text">TextStyle</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#textspan"><span class="toc-nav-number">1.1.3.</span> <span class="toc-nav-text">TextSpan</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#defaulttextstyle"><span class="toc-nav-number">1.1.4.</span> <span class="toc-nav-text">DefaultTextStyle</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#字体"><span class="toc-nav-number">1.1.5.</span> <span class="toc-nav-text">&#x5B57;&#x4F53;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#按钮"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">&#x6309;&#x94AE;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#raisedbutton"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">RaisedButton</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#flatbutton"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">FlatButton</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#outlinebutton"><span class="toc-nav-number">1.2.3.</span> <span class="toc-nav-text">OutlineButton</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#iconbutton"><span class="toc-nav-number">1.2.4.</span> <span class="toc-nav-text">IconButton</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#带图标的按钮"><span class="toc-nav-number">1.2.5.</span> <span class="toc-nav-text">&#x5E26;&#x56FE;&#x6807;&#x7684;&#x6309;&#x94AE;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#自定义按钮外观"><span class="toc-nav-number">1.2.6.</span> <span class="toc-nav-text">&#x81EA;&#x5B9A;&#x4E49;&#x6309;&#x94AE;&#x5916;&#x89C2;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#image及icon"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">Image&#x53CA;ICON</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#image"><span class="toc-nav-number">1.3.1.</span> <span class="toc-nav-text">Image</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#imageprovider"><span class="toc-nav-number">1.3.1.1.</span> <span class="toc-nav-text">ImageProvider</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#从asset中加载图片"><span class="toc-nav-number">1.3.1.2.</span> <span class="toc-nav-text">&#x4ECE;asset&#x4E2D;&#x52A0;&#x8F7D;&#x56FE;&#x7247;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#从网络加载图片"><span class="toc-nav-number">1.3.1.3.</span> <span class="toc-nav-text">&#x4ECE;&#x7F51;&#x7EDC;&#x52A0;&#x8F7D;&#x56FE;&#x7247;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#参数"><span class="toc-nav-number">1.3.1.4.</span> <span class="toc-nav-text">&#x53C2;&#x6570;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#image缓存"><span class="toc-nav-number">1.3.1.5.</span> <span class="toc-nav-text">Image&#x7F13;&#x5B58;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#icon"><span class="toc-nav-number">1.3.2.</span> <span class="toc-nav-text">ICON</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#使用material-design字体图标"><span class="toc-nav-number">1.3.2.1.</span> <span class="toc-nav-text">&#x4F7F;&#x7528;Material Design&#x5B57;&#x4F53;&#x56FE;&#x6807;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#使用自定义字体图标"><span class="toc-nav-number">1.3.2.2.</span> <span class="toc-nav-text">&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x5B57;&#x4F53;&#x56FE;&#x6807;</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#单选开关和复选框"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">&#x5355;&#x9009;&#x5F00;&#x5173;&#x548C;&#x590D;&#x9009;&#x6846;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#输入框及表单"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">&#x8F93;&#x5165;&#x6846;&#x53CA;&#x8868;&#x5355;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#textfield"><span class="toc-nav-number">1.5.1.</span> <span class="toc-nav-text">TextField</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#获取输入内容"><span class="toc-nav-number">1.5.1.1.</span> <span class="toc-nav-text">&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x5185;&#x5BB9;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#监听文本变化"><span class="toc-nav-number">1.5.1.2.</span> <span class="toc-nav-text">&#x76D1;&#x542C;&#x6587;&#x672C;&#x53D8;&#x5316;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#控制焦点"><span class="toc-nav-number">1.5.1.3.</span> <span class="toc-nav-text">&#x63A7;&#x5236;&#x7126;&#x70B9;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#监听焦点状态"><span class="toc-nav-number">1.5.1.4.</span> <span class="toc-nav-text">&#x76D1;&#x542C;&#x7126;&#x70B9;&#x72B6;&#x6001;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#自定义样式"><span class="toc-nav-number">1.5.1.5.</span> <span class="toc-nav-text">&#x81EA;&#x5B9A;&#x4E49;&#x6837;&#x5F0F;</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#表单form"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">&#x8868;&#x5355;Form</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#formfield"><span class="toc-nav-number">1.6.1.</span> <span class="toc-nav-text">FormField</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#formstate"><span class="toc-nav-number">1.6.2.</span> <span class="toc-nav-text">FormState</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#进度指示器progress"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">&#x8FDB;&#x5EA6;&#x6307;&#x793A;&#x5668;Progress</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#linearprogressindicator"><span class="toc-nav-number">1.7.1.</span> <span class="toc-nav-text">LinearProgressIndicator</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#circularprogressindicator"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">CircularProgressIndicator</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#自定义尺寸"><span class="toc-nav-number">1.8.1.</span> <span class="toc-nav-text">&#x81EA;&#x5B9A;&#x4E49;&#x5C3A;&#x5BF8;</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#布局widgets"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">&#x5E03;&#x5C40;widgets</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#线性布局"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">&#x7EBF;&#x6027;&#x5E03;&#x5C40;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#row"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">Row</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#column"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">Column</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#对齐-widgets"><span class="toc-nav-number">2.1.2.1.</span> <span class="toc-nav-text">&#x5BF9;&#x9F50; widgets</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#mainaxissize"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">MainAxisSize</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#弹性布局"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">&#x5F39;&#x6027;&#x5E03;&#x5C40;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#flex"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">Flex</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#expanded"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">Expanded</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#流式布局"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">&#x6D41;&#x5F0F;&#x5E03;&#x5C40;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#wrap"><span class="toc-nav-number">2.3.1.</span> <span class="toc-nav-text">Wrap</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#flow"><span class="toc-nav-number">2.3.2.</span> <span class="toc-nav-text">Flow</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#层叠布局"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">&#x5C42;&#x53E0;&#x5E03;&#x5C40;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#stack"><span class="toc-nav-number">2.4.1.</span> <span class="toc-nav-text">Stack</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#positioned"><span class="toc-nav-number">2.4.2.</span> <span class="toc-nav-text">Positioned</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#对齐和定位"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">&#x5BF9;&#x9F50;&#x548C;&#x5B9A;&#x4F4D;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#align"><span class="toc-nav-number">2.5.1.</span> <span class="toc-nav-text">Align</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#alignment"><span class="toc-nav-number">2.5.2.</span> <span class="toc-nav-text">Alignment</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#fractionaloffset"><span class="toc-nav-number">2.5.3.</span> <span class="toc-nav-text">FractionalOffset</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#center"><span class="toc-nav-number">2.5.4.</span> <span class="toc-nav-text">Center</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#容器类组件"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">&#x5BB9;&#x5668;&#x7C7B;&#x7EC4;&#x4EF6;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#padding"><span class="toc-nav-number">3.0.1.</span> <span class="toc-nav-text">Padding</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#padding"><span class="toc-nav-number">3.0.2.</span> <span class="toc-nav-text">Padding</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#edgeinsets"><span class="toc-nav-number">3.0.3.</span> <span class="toc-nav-text">EdgeInsets</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#尺寸限制类容器"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">&#x5C3A;&#x5BF8;&#x9650;&#x5236;&#x7C7B;&#x5BB9;&#x5668;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#constrainedbox"><span class="toc-nav-number">3.1.1.</span> <span class="toc-nav-text">ConstrainedBox</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#boxconstraints"><span class="toc-nav-number">3.1.1.1.</span> <span class="toc-nav-text">BoxConstraints</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#sizedbox"><span class="toc-nav-number">3.1.2.</span> <span class="toc-nav-text">SizedBox</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#多重限制"><span class="toc-nav-number">3.1.3.</span> <span class="toc-nav-text">&#x591A;&#x91CD;&#x9650;&#x5236;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#unconstrainedbox"><span class="toc-nav-number">3.1.4.</span> <span class="toc-nav-text">UnconstrainedBox</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#其它限制类容器"><span class="toc-nav-number">3.1.5.</span> <span class="toc-nav-text">&#x5176;&#x5B83;&#x9650;&#x5236;&#x7C7B;&#x5BB9;&#x5668;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#装饰容器"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">&#x88C5;&#x9970;&#x5BB9;&#x5668;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#decoratedbox"><span class="toc-nav-number">3.2.1.</span> <span class="toc-nav-text">DecoratedBox</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#boxdecoration"><span class="toc-nav-number">3.2.1.1.</span> <span class="toc-nav-text">BoxDecoration</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#变换transform"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">&#x53D8;&#x6362;Transform</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#平移"><span class="toc-nav-number">3.3.1.</span> <span class="toc-nav-text">&#x5E73;&#x79FB;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#旋转"><span class="toc-nav-number">3.3.2.</span> <span class="toc-nav-text">&#x65CB;&#x8F6C;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#缩放"><span class="toc-nav-number">3.3.3.</span> <span class="toc-nav-text">&#x7F29;&#x653E;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#rotatedbox"><span class="toc-nav-number">3.3.4.</span> <span class="toc-nav-text">RotatedBox</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#container"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">Container</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#padding和margin"><span class="toc-nav-number">3.4.1.</span> <span class="toc-nav-text">Padding&#x548C;Margin</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#scaffold-tabbar-底部导航"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">Scaffold&#x3001;TabBar&#x3001;&#x5E95;&#x90E8;&#x5BFC;&#x822A;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#scaffold"><span class="toc-nav-number">3.5.1.</span> <span class="toc-nav-text">Scaffold</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#appbar"><span class="toc-nav-number">3.5.1.1.</span> <span class="toc-nav-text">AppBar</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#tabbar"><span class="toc-nav-number">3.5.2.</span> <span class="toc-nav-text">TabBar</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#tabbarview"><span class="toc-nav-number">3.5.2.1.</span> <span class="toc-nav-text">TabBarView</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#drawer"><span class="toc-nav-number">3.5.3.</span> <span class="toc-nav-text">Drawer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#floatingactionbutton"><span class="toc-nav-number">3.5.4.</span> <span class="toc-nav-text">FloatingActionButton</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#底部tab导航栏"><span class="toc-nav-number">3.5.5.</span> <span class="toc-nav-text">&#x5E95;&#x90E8;Tab&#x5BFC;&#x822A;&#x680F;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#剪裁clip"><span class="toc-nav-number">3.6.</span> <span class="toc-nav-text">&#x526A;&#x88C1;&#xFF08;Clip&#xFF09;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#customclipper"><span class="toc-nav-number">3.6.1.</span> <span class="toc-nav-text">CustomClipper</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#card"><span class="toc-nav-number">3.7.</span> <span class="toc-nav-text">Card</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#可滚动组件"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">&#x53EF;&#x6EDA;&#x52A8;&#x7EC4;&#x4EF6;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#scrollbar"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">Scrollbar</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#viewport"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">ViewPort</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#基于sliver的延迟构建"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">&#x57FA;&#x4E8E;Sliver&#x7684;&#x5EF6;&#x8FDF;&#x6784;&#x5EFA;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#singlechildscrollview"><span class="toc-nav-number">4.4.</span> <span class="toc-nav-text">SingleChildScrollView</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#listview"><span class="toc-nav-number">4.5.</span> <span class="toc-nav-text">ListView</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#默认构造函数"><span class="toc-nav-number">4.5.1.</span> <span class="toc-nav-text">&#x9ED8;&#x8BA4;&#x6784;&#x9020;&#x51FD;&#x6570;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#listviewbuilder"><span class="toc-nav-number">4.5.2.</span> <span class="toc-nav-text">ListView.builder</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#listviewseparated"><span class="toc-nav-number">4.5.3.</span> <span class="toc-nav-text">ListView.separated</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#添加固定列表头"><span class="toc-nav-number">4.5.4.</span> <span class="toc-nav-text">&#x6DFB;&#x52A0;&#x56FA;&#x5B9A;&#x5217;&#x8868;&#x5934;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#gridview"><span class="toc-nav-number">4.6.</span> <span class="toc-nav-text">GridView</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#slivergriddelegatewithfixedcrossaxiscount"><span class="toc-nav-number">4.6.1.</span> <span class="toc-nav-text">SliverGridDelegateWithFixedCrossAxisCount</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#gridviewcount"><span class="toc-nav-number">4.6.2.</span> <span class="toc-nav-text">GridView.count</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#slivergriddelegatewithmaxcrossaxisextent"><span class="toc-nav-number">4.6.3.</span> <span class="toc-nav-text">SliverGridDelegateWithMaxCrossAxisExtent</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#gridviewextent"><span class="toc-nav-number">4.6.4.</span> <span class="toc-nav-text">GridView.extent</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#gridviewbuilder"><span class="toc-nav-number">4.6.5.</span> <span class="toc-nav-text">GridView.builder</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#customscrollview"><span class="toc-nav-number">4.7.</span> <span class="toc-nav-text">CustomScrollView</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#滚动监听及控制"><span class="toc-nav-number">4.8.</span> <span class="toc-nav-text">&#x6EDA;&#x52A8;&#x76D1;&#x542C;&#x53CA;&#x63A7;&#x5236;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#scrollcontroller"><span class="toc-nav-number">4.8.1.</span> <span class="toc-nav-text">ScrollController</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#滚动监听"><span class="toc-nav-number">4.8.2.</span> <span class="toc-nav-text">&#x6EDA;&#x52A8;&#x76D1;&#x542C;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#滚动位置恢复"><span class="toc-nav-number">4.8.3.</span> <span class="toc-nav-text">&#x6EDA;&#x52A8;&#x4F4D;&#x7F6E;&#x6062;&#x590D;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#scrollposition"><span class="toc-nav-number">4.8.4.</span> <span class="toc-nav-text">ScrollPosition</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#scrollcontroller控制原理"><span class="toc-nav-number">4.8.5.</span> <span class="toc-nav-text">ScrollController&#x63A7;&#x5236;&#x539F;&#x7406;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#滚动监听"><span class="toc-nav-number">4.8.6.</span> <span class="toc-nav-text">&#x6EDA;&#x52A8;&#x76D1;&#x542C;</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Flutter" title="Flutter">Flutter</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>








<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


<!-- chrome Firefox 中文锚点定位失效-->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<!-- smooth scroll behavior polyfill  -->
<script type="text/javascript" src="/js/smoothscroll.js"></script>
<script>
        $('#toc').on('click','a',function(a){
            // var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
            // console.log(window.navigator.userAgent,isChrome)
                // if(isChrome) {
                    // console.log(a.currentTarget.outerHTML);
                    // console.log($(a.currentTarget).attr("href"));
                    //跳转到指定锚点
                    // document.getElementById(a.target.innerText.toLowerCase()).scrollIntoView(true);
                    document.getElementById($(a.currentTarget).attr("href").replace("#","")).scrollIntoView({behavior: 'smooth' });
                // }
        })  
</script>


    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/earthwo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; alonealice 2021 
                    <br>
                    Theme by <a href="http://beantech.org">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com">胡伟煌</a>
                    <br> 
                        <a target="_blank" href="http://www.beian.miit.gov.cn" >浙ICP备17033688号-2</a> |
                        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602011270">浙公网安备 33010602011270号</a>     
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://alonealice.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'xxx';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="http://alonealice.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
